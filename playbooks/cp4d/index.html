<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="canonical" href="https://ibm-mas.github.io/ansible-devops/playbooks/cp4d/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>CP4D Playbooks - MAS Devops Collection</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../extra.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "CP4D Playbooks";
    var mkdocs_page_input_path = "playbooks/cp4d.md";
    var mkdocs_page_url = "/ansible-devops/playbooks/cp4d/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> MAS Devops Collection</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Full Stack Playbooks</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../fullstack-roks/">IBM Cloud</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Lite Playbooks</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../lite-core-roks/">Core only on IBM Cloud</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../lite-core-quickburn/">Core only on QuickBurn</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../lite-manage-roks/">Manage on IBM Cloud</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Other Playbooks</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../ocp/">OCP Playbooks</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../dependencies/">Dependencies Playbooks</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">CP4D Playbooks</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#create-db2-instance">Create DB2 Instance</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#backup-restore-db2-instance">Backup &amp; Restore DB2 Instance</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#hack-worker-nodes">Hack Worker Nodes</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#install-services-db2">Install Services: Db2</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#install-services-fullstack">Install Services: Fullstack</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#install-services-watson-studio">Install Services: Watson Studio</a>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../mas/">MAS Playbooks</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">Roles</span></p>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/amqstreams/">amqstreams</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/ansible_version_check/">ansible_version_check</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_db2wh/">cp4d_db2wh</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_db2wh_manage_hack/">cp4d_db2wh_manage_hack</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_hack_worker_nodes/">cp4d_hack_worker_nodes</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_install/">cp4d_install</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/cp4d_install_services/">cp4d_install_services</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/install_operator/">install_operator</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/mongodb/">mongodb</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_deprovision/">ocp_deprovision</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_login/">ocp_login</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_provision/">ocp_provision</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_setup_github_oauth/">ocp_setup_github_oauth</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_setup_mas_deps/">ocp_setup_mas_deps</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/ocp_setup_ocs/">ocp_setup_ocs</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/sls_gencfg/">sls_gencfg</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/sls_install/">sls_install</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_configure/">suite_app_configure</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_app_install/">suite_app_install</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_config/">suite_config</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_dns/">suite_dns</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_install/">suite_install</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_mustgather/">suite_mustgather</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/suite_verify/">suite_verify</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../roles/uds_install/">uds_install</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">MAS Devops Collection</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Other Playbooks &raquo;</li>
        
      
    
    <li>CP4D Playbooks</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/playbooks/cp4d.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="cp4d-playbooks">CP4D Playbooks<a class="headerlink" href="#cp4d-playbooks" title="Permanent link"></a></h1>
<p>CloudPak for Data support comes in two flavours: CP4D v3.5 and CP4D v4.  For users of MAS v8.7 or later only CP4D v4 is supported.  MAS 8.6 with the January 2022 maintenance updates supports both, and earlier version of MAS only support CP4D v3.5.</p>
<ul>
<li>CloudPak for Data v3.5 is installed from the IBM Operator Catalog using the <code>v1.0</code> channel to the <code>cpd-meta-ops</code> namespace.</li>
<li>CloudPak for Data v4 is installed from the IBM Operator Catalog using the <code>v2.0</code> channel to the <code>ibm-common-services</code> namespace.</li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The credentials to sign-in when deploying CP4D v3.5 are the defaults, which are <code>admin/password</code>.  Yes, really!</p>
</div>
<hr />
<h2 id="create-db2-instance">Create DB2 Instance<a class="headerlink" href="#create-db2-instance" title="Permanent link"></a></h2>
<p>This playbook will auto-detect whether CP4D v3.5 or v4 is active in the cluster.  Refer to the <a href="../../roles/cp4d_db2wh/">cp4d_db2wh</a> role documentation for more information.</p>
<pre><code class="language-bash">export DB2WH_INSTANCE_NAME=db2w-shared

export DB2WH_META_STORAGE_CLASS=ibmc-file-silver-gid
export DB2WH_USER_STORAGE_CLASS=ibmc-file-gold-gid
export DB2WH_BACKUP_STORAGE_CLASS=ibmc-file-gold-gid
export DB2WH_LOGS_STORAGE_CLASS=ibmc-file-silver-gid
export DB2WH_TEMP_STORAGE_CLASS=ibmc-file-silver-gid

export MAS_INSTANCE_ID=inst1
export MAS_CONFIG_DIR=~/masconfig

ansible-playbook playbooks/cp4d/create-db2-instance.yml
</code></pre>
<hr />
<h2 id="backup-restore-db2-instance">Backup &amp; Restore DB2 Instance<a class="headerlink" href="#backup-restore-db2-instance" title="Permanent link"></a></h2>
<p>This playbook will execute procedures to take a backup from a source DB2 instance and restore into a target DB2 instance.</p>
<pre><code class="language-bash">export DB2WH_BACKUP_DIR='/Users/Documents/db_backup'
export DB2WH_INSTANCE_ID_SOURCE='db2wh-1637258370283030'
export DB2WH_INSTANCE_ID_TARGET='db2wh-1641225392064040'

ansible-playbook playbooks/cp4d/db2wh-backup.yml
ansible-playbook playbooks/cp4d/db2wh-restore.yml
</code></pre>
<hr />
<h2 id="hack-worker-nodes">Hack Worker Nodes<a class="headerlink" href="#hack-worker-nodes" title="Permanent link"></a></h2>
<p>This playbook will auto-detect whether CP4D v3.5 or v4 is active in the cluster.  Refer to the <a href="../../roles/cp4d_hack_worker_nodes/">cp4d_hack_worker_nodes</a> role documentation for more information.</p>
<pre><code class="language-bash">export CLUSTER_NAME=masinst1
export CLUSTER_TYPE=roks
export IBMCLOUD_APIKEY=xxx
export CPD_ENTITLEMENT_KEY=xxx

ansible-playbook playbooks/cp4d/hack-worker-nodes.yml
</code></pre>
<hr />
<h2 id="install-services-db2">Install Services: Db2<a class="headerlink" href="#install-services-db2" title="Permanent link"></a></h2>
<p>This playbook will install CP4D and enable the CP4D <strong>Db2 Warehouse</strong> service.</p>
<p>Refer to the <a href="../../roles/cp4d_install/">cp4d_install</a> and <a href="../../roles/cp4d_install_services/">cp4d_install_services</a> role documentation for more information.</p>
<pre><code class="language-bash">export CPD_VERSION=cpd40
export CPD_STORAGE_CLASS=ibmc-file-gold-gid
export CPD_BLOCK_STORAGE_CLASS=ibmc-block-gold

ansible-playbook playbooks/cp4d/install-services-db2.yml
</code></pre>
<hr />
<h2 id="install-services-fullstack">Install Services: Fullstack<a class="headerlink" href="#install-services-fullstack" title="Permanent link"></a></h2>
<p>This playbook will install CP4D and enable the CP4D <strong>Db2 Warehouse</strong> service and <strong>Watson Studio</strong> with Watson Machine Learning, Apache Spark, &amp; Watson AI OpenScale capabilities enabled.</p>
<ul>
<li><strong>Watson Machine Learning</strong> As part of Watson Studio, Watson Machine Learning helps data scientists and developers accelerate AI and machine learning deployment.</li>
<li><strong>Apache Spark</strong> Apache Spark is a runtime environment configured inside of Watson Studio similar to a Python Runtime environment.  When Spark is enabled from CP4D, you can opt to create a notebook and choose Spark as runtime to expand data modeling capabilities.</li>
<li><strong>Watson AI OpenScale</strong>  Watson OpenScale enables tracking AI models in production, validation and test models to mitigate operational risks.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Application Support</p>
<p>For more information on how Predict and HP Utilities make use of Watson Studio, refer to <a href="https://www.ibm.com/docs/en/mhmpmh-and-p-u/8.2.0?topic=started-getting-data-scientists">Predict/HP Utilities documentation</a></p>
<ul>
<li><a href="https://www.ibm.com/docs/en/mas84/8.4.0?topic=applications-maximo-predict">Predict</a> requires Watson Studio, Machine Learning and Spark; Openscale is an optional dependency</li>
<li><a href="https://www.ibm.com/docs/en/mas84/8.4.0?topic=solutions-maximo-health-predict-utilities">Health &amp; Predict Utilities</a> requires Watson Studio base capability only</li>
</ul>
</div>
<p>Refer to the <a href="../../roles/cp4d_install/">cp4d_install</a> and <a href="../../roles/cp4d_install_services/">cp4d_install_services</a> role documentation for more information.</p>
<pre><code class="language-bash">export CPD_VERSION=cpd40
export CPD_STORAGE_CLASS=ibmc-file-gold-gid
export CPD_BLOCK_STORAGE_CLASS=ibmc-block-gold

ansible-playbook playbooks/cp4d/install-services-fullstack.yml
</code></pre>
<hr />
<h2 id="install-services-watson-studio">Install Services: Watson Studio<a class="headerlink" href="#install-services-watson-studio" title="Permanent link"></a></h2>
<p>This playbook will install CP4D and install the <strong>Watson Studio</strong> with Watson Machine Learning, Apache Spark, &amp; Watson AI OpenScale capabilities enabled.</p>
<ul>
<li><strong>Watson Machine Learning</strong> As part of Watson Studio, Watson Machine Learning helps data scientists and developers accelerate AI and machine learning deployment.</li>
<li><strong>Apache Spark</strong> Apache Spark is a runtime environment configured inside of Watson Studio similar to a Python Runtime environment.  When Spark is enabled from CP4D, you can opt to create a notebook and choose Spark as runtime to expand data modeling capabilities.</li>
<li><strong>Watson AI OpenScale</strong>  Watson OpenScale enables tracking AI models in production, validation and test models to mitigate operational risks.</li>
</ul>
<div class="admonition info">
<p class="admonition-title">Application Support</p>
<p>For more information on how Predict and HP Utilities make use of Watson Studio, refer to <a href="https://www.ibm.com/docs/en/mhmpmh-and-p-u/8.2.0?topic=started-getting-data-scientists">Predict/HP Utilities documentation</a></p>
<ul>
<li><a href="https://www.ibm.com/docs/en/mas84/8.4.0?topic=applications-maximo-predict">Predict</a> requires Watson Studio, Machine Learning and Spark; Openscale is an optional dependency</li>
<li><a href="https://www.ibm.com/docs/en/mas84/8.4.0?topic=solutions-maximo-health-predict-utilities">Health &amp; Predict Utilities</a> requires Watson Studio base capability only</li>
</ul>
</div>
<p>Refer to the <a href="../../roles/cp4d_install/">cp4d_install</a> and <a href="../../roles/cp4d_install_services/">cp4d_install_services</a> role documentation for more information.</p>
<pre><code class="language-bash">export CPD_VERSION=cpd40
export CPD_STORAGE_CLASS=ibmc-file-gold-gid
export CPD_BLOCK_STORAGE_CLASS=ibmc-block-gold

ansible-playbook playbooks/cp4d/install-services-watsonstudio.yml
</code></pre>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/ansible-devops/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../dependencies/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../mas/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
