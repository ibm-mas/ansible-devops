<!DOCTYPE html><html><head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>OCP - MAS DevOps Ansible Collection</title>

    <!-- Pure CSS (https://pure-css.github.io/) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/theme.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="../../js/theme.js"></script>

    <!-- Carbon theme zones (white, g10, g90, g100) -->
    <link rel="stylesheet" href="https://1.www.s81c.com/common/carbon/web-components/tag/latest/themes.css">

    <!-- The Carbon web-components/framework -->
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/ui-shell.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/accordion.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/breadcrumb.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/select.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/tabs.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/search.min.js"></script>

    <!-- HighlightJS code formatting support -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- Required by MkDocs search -->
    <script>var base_url = "../..";</script>

    <!-- User defined extras -->
    
    

    

    
    <script src="../../search/main.js"></script>
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: black; }
        </style></head>

  <body>
    <cds-header aria-label="MAS DevOps Ansible Collection" class="cds-theme-zone-g100">
      <cds-header-menu-button button-label-active="Close menu" button-label-inactive="Open menu"></cds-header-menu-button>
      <cds-header-name href="../.." prefix="IBM">MAS DevOps Ansible Collection</cds-header-name>
      <cds-header-nav menu-bar-label="IBM MAS DevOps Ansible Collection">
          <cds-header-nav-item is-active target="" href="">Ansible</cds-header-nav-item>
          <cds-header-nav-item target="" href="https://ibm-mas.github.io/cli/">CLI</cds-header-nav-item>
      </cds-header-nav>

      <div class="cds--header__global">
        <cds-search id="header-search" label-text="Search" cds-search-input="search-event" expandable></cds-search>
      </div>
      <script>
        var el = document.getElementById("header-search");
        el.addEventListener("cds-search-input", function (ev) {
          console.info(ev.detail.value)
          document.getElementById("header-search-value").setAttribute("value", ev.detail.value);
        });
        el.addEventListener('keydown', function (ev) {
          if (ev.key === 'Enter') {
            location.href="../../search.html?q=" + document.querySelector("#header-search").shadowRoot.querySelector("#input").value;
          }
        });
      </script>

      
        <cds-header-nav>
          <cds-header-nav-item href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/playbooks/ocp.md">Edit on GitHub</cds-header-nav-item>
        </cds-header-nav>
      

    </cds-header>

    <cds-side-nav aria-label="Side navigation" class="cds-theme-zone-g90">
      <cds-side-nav-items>
        
          
  <cds-side-nav-menu title="General Information">
    
      
  <cds-side-nav-menu-item href="../..">
    Home
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../execution-environment/">
    Ansible Automation Platform
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Playbooks" active expanded>
    
      
  <cds-side-nav-menu-item href="./" active expanded>
    OCP
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d/">
    Install Cloud Pak For Data
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aiservice/">
    Install AI Service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-core/">
    Install Core
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-iot/">
    Add IoT
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-manage/">
    Add Manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-monitor/">
    Add Monitor
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-optimizer/">
    Add Optimizer
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-predict/">
    Add Predict
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-visualinspection/">
    Add Visual Inspection
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-facilities/">
    Add Real Estate and Facilities
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-update/">
    Update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mas-upgrade/">
    Upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../backup-restore/">
    Backup &amp; Restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: OCP Mgmt">
    
      
  <cds-side-nav-menu-item href="../../roles/ocp_cluster_monitoring/">
    ocp_cluster_monitoring
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_config/">
    ocp_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_deprovision/">
    ocp_deprovision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_efs/">
    ocp_efs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_github_oauth/">
    ocp_github_oauth
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_login/">
    ocp_login
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_node_config/">
    ocp_node_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_provision/">
    ocp_provision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_roks_upgrade_registry_storage/">
    ocp_roks_upgrade_registry_storage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_upgrade/">
    ocp_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_verify/">
    ocp_verify
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Dependency Mgmt">
    
      
  <cds-side-nav-menu-item href="../../roles/appconnect/">
    appconnect
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/aws_bucket_access_point/">
    aws_bucket_access_point
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/aws_documentdb_user/">
    aws_documentdb_user
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/aws_policy/">
    aws_policy
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/aws_route53/">
    aws_route53
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/aws_user_creation/">
    aws_user_creation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/aws_vpc/">
    aws_vpc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/cert_manager/">
    cert_manager
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/cis/">
    cis
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/configure_manage_eventstreams/">
    configure_manage_eventstreams
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/cos/">
    cos
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/cos_bucket/">
    cos_bucket
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/cp4d_admin_pwd_update/">
    cp4d_admin_pwd_update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/cp4d/">
    cp4d
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/cp4d_service/">
    cp4d_service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/db2/">
    db2
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/dro/">
    dro
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/eck/">
    eck
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/grafana/">
    grafana
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ibm_catalogs/">
    ibm_catalogs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/kafka/">
    kafka
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/longhorn/">
    longhorn
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/nvidia_gpu/">
    nvidia_gpu
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/mongodb/">
    mongodb
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocs/">
    ocs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/sls/">
    sls
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/turbonomic/">
    turbonomic
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Image Mirroring">
    
      
  <cds-side-nav-menu-item href="../../roles/mirror_case_prepare/">
    mirror_case_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/mirror_extras_prepare/">
    mirror_extras_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/mirror_images/">
    mirror_images
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/mirror_ocp/">
    mirror_ocp
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_idms/">
    ocp_idms
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/ocp_simulate_disconnected_network/">
    ocp_simulate_disconnected_network
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/registry/">
    registry
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Suite Mgmt">
    
      
  <cds-side-nav-menu-item href="../../roles/suite_app_config/">
    suite_app_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_app_install/">
    suite_app_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_app_uninstall/">
    suite_app_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_app_upgrade/">
    suite_app_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_app_rollback/">
    suite_app_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_app_backup_restore/">
    suite_app_backup_restore
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_certs/">
    suite_certs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_config/">
    suite_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_db2_setup_for_manage/">
    suite_db2_setup_for_manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_dns/">
    suite_dns
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_install/">
    suite_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_attachments_config/">
    suite_manage_attachments_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_birt_report_config/">
    suite_manage_birt_report_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_bim_config/">
    suite_manage_bim_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_customer_files_config/">
    suite_manage_customer_files_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_imagestitching_config/">
    suite_manage_imagestitching_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_import_certs_config/">
    suite_manage_import_certs_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_load_dbc_scripts/">
    suite_manage_load_dbc_scripts
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_logging_config/">
    suite_manage_logging_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_manage_pvc_config/">
    suite_manage_pvc_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_uninstall/">
    suite_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_upgrade/">
    suite_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_rollback/">
    suite_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_verify/">
    suite_verify
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/suite_backup_restore/">
    suite_backup_restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Utilities">
    
      
  <cds-side-nav-menu-item href="../../roles/ansible_version_check/">
    ansible_version_check
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/entitlement_key_rotation/">
    entitlement_key_rotation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/gencfg_jdbc/">
    gencfg_jdbc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/gencfg_watsonstudio/">
    gencfg_watsonstudio
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/gencfg_workspace/">
    gencfg_workspace
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../roles/gencfg_mongo/">
    gencfg_mongo
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
      </cds-side-nav-items>
    </cds-side-nav>

    <div id="breadcrumbs" class="rst-content"><cds-breadcrumb no-trailing-slash>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="../..">Home</cds-breadcrumb-link>
  </cds-breadcrumb-item>
      <cds-breadcrumb-item>Playbooks</cds-breadcrumb-item>

  <cds-breadcrumb-item aria-current="page">
    <cds-breadcrumb-link href="#ocp-playbooks">OCP Playbooks</cds-breadcrumb-link>
  </cds-breadcrumb-item>

  <cds-breadcrumb-item>
    <cds-select id="breadcrumbs-toc" class="cds-theme-zone-g10" inline placeholder="..." oninput="changeAnchor(this.value)">
    
    
      <cds-select-item value="#provision">Provision</cds-select-item>
    
      <cds-select-item value="#deprovision">Deprovision</cds-select-item>
    
  </cds-select>
  </cds-breadcrumb-item>
</cds-breadcrumb>
    </div>

    <div id="main-content" class="rst-content">
      
      <h1 id="ocp-playbooks">OCP Playbooks<a class="headerlink" href="#ocp-playbooks" title="Permanent link">¤</a></h1>
<h2 id="provision">Provision<a class="headerlink" href="#provision" title="Permanent link">¤</a></h2>
<p>Refer to the <a href="../../roles/ocp_provision/">ocp_provision</a> role documentation for more information.</p>
<h3 id="provision-on-aws-rosa">Provision on AWS ROSA<a class="headerlink" href="#provision-on-aws-rosa" title="Permanent link">¤</a></h3>
<p>This playbook uses your ROSA API Token to provision a brand new OCP cluster, provision an instance of EFS and set up the cluster with a ReadWriteMany storage class named <code>efs</code> utilizing that instance.</p>
<p>To obtain your API token login to the <a href="https://console.redhat.com/openshift/token/rosa/show#">OpenShift cluster manager</a>.</p>
<pre><code class="language-bash">export AWS_ACCESS_KEY_ID=xxx
export AWS_SECRET_ACCESS_KEY=xxx
export ROSA_TOKEN=xxx

export CLUSTER_NAME=masonrosa
export OCP_VERSION=4.19
export ROSA_COMPUTE_NODES=5
export ROSA_CLUSTER_ADMIN_PASSWORD=xxx
ansible-playbook ibm.mas_devops.ocp_rosa_provision
</code></pre>
<h3 id="provision-on-ibmcloud-roks">Provision on IBMCloud ROKS<a class="headerlink" href="#provision-on-ibmcloud-roks" title="Permanent link">¤</a></h3>
<p>This playbook uses your IBMCloud API key to provision a brand new OCP cluster.</p>
<p>The playbook supports installing an IBM entitlement key as a cluster-wide image pull secret and reboot all worker nodes, which is required for IBM Cloud Pak for Data v4; this can be enabled by setting <code>REBOOT_WORKER_NODES</code> to <code>true</code> and providing the entitlement key with <code>CPD_ENTITLEMENT_KEY</code>.</p>
<p>This also supports upgrading the storage volume used for the cluster's internal image registry from 100Gb to 400Gb, this must be enabled by setting <code>UPGRADE_IMAGE_REGISTRY_STORAGE</code> to <code>true</code>.  This option is stringly recommended if you intend to install the Watson services from Cloud Pak for Data as the default volume size is too small.</p>
<pre><code class="language-bash">export CLUSTER_NAME=masinst1
export OCP_VERSION=4.19_openshift
export IBMCLOUD_APIKEY=xxx
export REBOOT_WORKER_NODES=true
export CPD_ENTITLEMENT_KEY=xxx
export UPGRADE_IMAGE_REGISTRY_STORAGE=true
ansible-playbook ibm.mas_devops.ocp_roks_provision
</code></pre>
<h3 id="provision-on-ibm-devit-fyre">Provision on IBM DevIT Fyre<a class="headerlink" href="#provision-on-ibm-devit-fyre" title="Permanent link">¤</a></h3>
<p>This playbook will provision a QuickBurn OCP cluster in IBM DevIT Fyre service, QuickBurn clusters will be automatically deprovisioned after 36 hours and are only suitable for small scale deployments for local development and demostration systems.</p>
<pre><code class="language-bash">export CLUSTER_NAME=masinst1
export OCP_VERSION=4.19
export FYRE_USERNAME=xxx
export FYRE_APIKEY=xxx
export FYRE_PRODUCT_ID=xxx

ansible-playbook ibm.mas_devops.ocp_fyre_provision
</code></pre>
<h2 id="deprovision">Deprovision<a class="headerlink" href="#deprovision" title="Permanent link">¤</a></h2>
<p>Refer to the <a href="../../roles/ocp_deprovision/">ocp_deprovision</a> role documentation for more information.</p>
<h3 id="deprovision-on-ibmcloud-roks">Deprovision on IBMCloud ROKS<a class="headerlink" href="#deprovision-on-ibmcloud-roks" title="Permanent link">¤</a></h3>
<pre><code class="language-bash">export CLUSTER_NAME=masinst1
export IBMCLOUD_APIKEY=xxx

ansible-playbook ibm.mas_devops.ocp_roks_deprovision
</code></pre>
<h3 id="deprovision-on-ibm-devit-fyre">Deprovision on IBM DevIT Fyre<a class="headerlink" href="#deprovision-on-ibm-devit-fyre" title="Permanent link">¤</a></h3>
<pre><code class="language-bash">export CLUSTER_NAME=masinst1
export FYRE_USERNAME=xxx
export FYRE_APIKEY=xxx

ansible-playbook ibm.mas_devops.ocp_fyre_deprovision
</code></pre>
      
    </div>
    <!-- <div id="footer" class="rst-content">
      Built with mkdocs v1.6.1 (2025-11-28 12:14:38.027933+00:00)
    </div> -->
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": false, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body></html>