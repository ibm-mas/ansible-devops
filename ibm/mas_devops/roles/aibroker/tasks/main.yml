---
- name: Load variables (main)
  include_vars: "vars/main.yml"

# Create IBM Maximo IBM Maximo AI Broker
# -----------------------------------------------------------------------------
- name: "Create IBM Maximo AI Broker namespace"
  kubernetes.core.k8s:
    state: present
    api_version: v1
    kind: Namespace
    name: "{{ aibroker_namespace }}"

# Create secret for minio
- include_tasks: tasks/minio/main.yml
  when: mas_app_channel in [ '9.1.x']

# Create secret for mariadb
- include_tasks: tasks/mariadb/main.yml
  when: mas_app_channel in [ '9.1.x']

# Create secret for watsonX Ai
- include_tasks: tasks/watsonxai/main.yml
  when: mas_app_channel in [ '9.1.x' ]

# Create config for SLS
- include_tasks: tasks/config_sls/main.yml
  when: mas_app_channel in [ '9.1.x' ]

# Create config for DRO
- include_tasks: tasks/config_dro/main.yml
  when: mas_app_channel in [ '9.1.x']

# Create config for DB2
- include_tasks: tasks/config_db2/main.yml
  when: mas_app_channel in [ '9.1.x' ]

# install AI Broker api
- include_tasks: tasks/aibroker/main.yml
  when: mas_app_channel in [ '9.1.x' ]

# # run api calls for aibroker saas
# - include_tasks: tasks/saas/main.yml
#   when: mas_aibroker_saas == true

# create AI Broker tenant
- include_tasks: tasks/tenant/main.yml
  when: mas_app_channel in [ '9.0.x']

# create AI Broker api key
- include_tasks: tasks/apikey/main.yml
  when: mas_app_channel in [ '9.0.x' ]

# create s3 api key
- include_tasks: tasks/s3/main.yml
  when: mas_app_channel in [ '9.0.x' ]

# create wx api
- include_tasks: tasks/watsonx/main.yml
  when: mas_app_channel in [ '9.0.x' ]
