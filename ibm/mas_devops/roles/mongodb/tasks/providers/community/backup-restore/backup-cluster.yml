---
# Backup Mongodb Community edition cluster Instance
# -----------------------------------------------------------------------------

# Backup Mongodb instance Resources
# -------------------------------------------------------------------------
- name: "Start Mongo Instance backup process."
  ibm.mas_devops.backup_mongo_instance:
    mongodb_backup_path: "{{ mongodb_backup_path }}"
    mongodb_namespace: "{{ mongodb_namespace }}"
    mongodb_instance_name: "{{ mongodb_instance_name }}"
  register: mongo_instance_backup_result

- name: "Assert Mongo Instance backup success"
  assert:
    that:
      - mongo_instance_backup_result is defined
      - mongo_instance_backup_result.success == true
    fail_msg: "MongoDB Instance resources backup failed."
