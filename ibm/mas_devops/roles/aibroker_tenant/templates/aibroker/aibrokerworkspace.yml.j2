---
apiVersion: apps.mas.ibm.com/v1
kind: AiBrokerWorkspace
metadata:
    name: "{{ tenantNamespace }}"
    namespace: "{{ aibroker_namespace }}"
    labels:
        mas.ibm.com/applicationId: aibroker
        mas.ibm.com/instanceId: "{{ mas_instance_id }}"
{% if custom_labels is defined and custom_labels.items() %}
{% for key, value in custom_labels.items() %}
        "{{ key }}": "{{ value }}"
{% endfor %}
{% endif %}
spec:
    settings:
        icr:
            cp: "{{ mas_icr_cp }}"
            cpopen: "{{ mas_icr_cpopen }}"
        dro:
            url: "{{ drocfg.url }}"
            secretName: "{{ mas_aibroker_dro_token_secret }}"
            ca: "{{ drocfg.ca }}"
        sls:
            url: "{{ slscfg.url }}"
            secretName: "{{ mas_aibroker_sls_secret }}"
            ca: "{{ slscfg.ca }}"
        rsl:
            url: "{{ rslcfg.url }}"
            orgId: "{{ rslcfg.org_id }}"
            secretName: "{{ mas_aibroker_rsl_secret }}"
        watsonxai:
            url: "{{ mas_aibroker_watsonxai_url }}"
            secretName: "{{ mas_aibroker_watsonxai_secret }}"
            project_id: "{{ mas_aibroker_watsonxai_project_id }}"
        tenant: 
            tenant_id: "{{ mas_aibroker_tenant_name }}"
            subscription_id: "{{ mas_aibroker_sls_subscription_id }}"
            instance_id: "{{ mas_instance_id }}"
            entitlement:
                type: {{ tenant_entitlement_type }}
                startDate: {{ tenant_entitlement_start_date }}
                endDate: {{ tenant_entitlement_end_date }}
