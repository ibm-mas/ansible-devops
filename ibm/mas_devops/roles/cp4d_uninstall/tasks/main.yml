---
- name: 1. Delete OLM objects (Subscriptions / CSVs / InstallPlans)
  include_tasks: cleanup_olm_objects.yml

- name: 2. Delete CatalogSources (marketplace)
  include_tasks: cleanup_catalogs.yml

- name: 3. Delete operator workloads (deployments/statefulsets/jobs)
  include_tasks: delete_operator_workloads.yml

- name: 4. Remove finalizers from operator CRs (k8s module)
  include_tasks: remove_operator_cr_finalizers.yml

- name: 5. Remove finalizers (oc fallback + force deletes)
  include_tasks: remove_finalizers.yml

- name: 6. Cleanup operand CRs (force delete operand-* CRs)
  include_tasks: cleanup_operand_resources.yml

- name: 7. Delete CP4D-related CRDs
  include_tasks: delete_crds.yml

- name: 8. Delete namespaces (with fallback retry loop)
  include_tasks: delete_namespaces.yml
