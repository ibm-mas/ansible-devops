---
# 1. Custom Labels
# -----------------------------------------------------------------------------
custom_labels: "{{ lookup('env', 'CUSTOM_LABELS') | default(None, true) | string | ibm.mas_devops.string2dict() }}"


# 2. MAS configuration
# -----------------------------------------------------------------------------
mas_instance_id: "{{ lookup('env', 'MAS_INSTANCE_ID') }}"
mas_workspace_id: "{{ lookup('env', 'MAS_WORKSPACE_ID') }}"
mas_config_dir: "{{ lookup('env', 'MAS_CONFIG_DIR') }}"


# 3. MAS application configuration
# -----------------------------------------------------------------------------
mas_app_id: "{{ lookup('env', 'MAS_APP_ID') }}"
mas_appws_bindings_jdbc: "{{ lookup('env', 'MAS_APPWS_BINDINGS_JDBC') }}"
mas_appws_components: "{{ lookup('env', 'MAS_APPWS_COMPONENTS') | ibm.mas_devops.appws_components | default('{}', true) }}"

# Only used by Predict currently - will be deprecated in favour of OM3.1 implementation
mas_appws_settings_deployment_size: "{{ lookup('env', 'MAS_APPWS_SETTINGS_DEPLOYMENT_SIZE') | default('small', true) }}"

# Only used by Manage (Attachments)
mas_manage_attachment_configuration_mode: "{{ lookup('env', 'MAS_MANAGE_ATTACHMENT_CONFIGURATION_MODE') }}"
mas_manage_attachments_provider: "{{ lookup('env', 'MAS_MANAGE_ATTACHMENTS_PROVIDER') }}"
db2_instance_name: "{{ lookup('env', 'DB2_INSTANCE_NAME') }}"
db2_namespace: "{{ lookup('env', 'DB2_NAMESPACE') }}"
db2_dbname: "{{ lookup('env', 'DB2_DBNAME') }}"
cos_instance_name: "{{ lookup('env', 'COS_INSTANCE_NAME') }}"
cos_bucket_name: "{{ lookup('env', 'COS_BUCKET_NAME') }}"
ibmcloud_resourcegroup: "{{ lookup('env', 'IBMCLOUD_RESOURCEGROUP') }}"


# 4. Cloud Pak for Data integration (Predict, HP Utils)
# -----------------------------------------------------------------------------
# This is used to determine the version of WML, which Predict needs to be
# provided at install time
cpd_product_version: "{{ lookup('env', 'CPD_PRODUCT_VERSION') }}"

# Watson Studio Local (Predict, HP Utils)
cpd_wsl_project_id: "{{ lookup('env', 'CPD_WSL_PROJECT_ID') | default('', true) }}"
cpd_wsl_project_name: "{{ lookup('env', 'CPD_WSL_PROJECT_NAME') | default('wsl-mas-' + mas_instance_id + '-hputilities', true) }}" # default must be the same expected by cp4d_services role

# Watson Machine Learning (Predict)
cpd_wml_instance_id: "{{ lookup('env', 'CPD_WML_INSTANCE_ID') | default('openshift', true) }}"
cpd_wml_url: "{{ lookup('env', 'CPD_WML_URL') | default('https://internal-nginx-svc.ibm-cpd.svc:12443', true) }}"

# PodTemplates configuration
# mas_pod_templates_dir: path to directory containing podTemplates configuration
# -----------------------------------------------------------------------------
mas_pod_templates_dir: "{{ lookup('env', 'MAS_POD_TEMPLATES_DIR') | default('', true) }}"

# Customization Archive configuration
# -----------------------------------------------------------------------------
suite_app_config_custom_list: []
# Exemple
  # - archive_name: "archive_name01"
  #   archive_url: "https://download.archive.com/"
  #   archive_username: "user"
  #   archive_password: "password"
  # - archive_name: "archive_name02"
  #   archive_url: "https://download.archive.com/"
  #   archive_username: "user"
  #   archive_password: "password"

mas_app_settings_customization_archive_url: "{{ lookup('env', 'MAS_APP_SETTINGS_CUSTOMIZATION_ARCHIVE_URL') }}"
mas_app_settings_customization_archive_name: "{{ lookup('env', 'MAS_APP_SETTINGS_CUSTOMIZATION_ARCHIVE_NAME') | default('manage-custom-archive', true) }}"
mas_app_settings_customization_archive_username: "{{ lookup('env', 'MAS_APP_SETTINGS_CUSTOMIZATION_ARCHIVE_USERNAME') }}"
mas_app_settings_customization_archive_password: "{{ lookup('env', 'MAS_APP_SETTINGS_CUSTOMIZATION_ARCHIVE_PASSWORD') }}"

# mas_app_settings_customization_credentials_secret_name: "{{ mas_workspace_id }}-{{ mas_app_id }}-cl0--cac--sn"
# mas_app_settings_customization_credentials:
#   customizationArchiveCredentials:
#     secretName: "{{ mas_app_settings_customization_credentials_secret_name }}"
