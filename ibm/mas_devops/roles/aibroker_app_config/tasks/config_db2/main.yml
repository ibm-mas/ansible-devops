---
- name: "Read jdbc config file"
  ansible.builtin.set_fact:
    jdbccfg: "{{ lookup('file', '{{ mas_config_dir }}/jdbc-{{ mas_app_id }}-db2u.yml') | from_yaml_all }}"

- name: "Set dro mandatory vars"
  ansible.builtin.set_fact:
    jdbccfg:
      jdbc_username: "{{ jdbccfg[0].data.username | b64decode}}"
      jdbc_password: "{{ jdbccfg[0].data.password | b64decode}}"
      jdbc_url: "{{ jdbccfg[1].spec.config.url }}"
      jdbc_cert_ca: "{{ jdbccfg[1].spec.certificates }}"

- name: "Debug: jdbc information" #TODO: remove before PR
  debug:
    msg:
      - "JDBC username ............. {{ jdbccfg.jdbc_username }}"
      - "JDBC password ............. {{ jdbccfg.jdbc_password }}"
      - "JDBC url .................. {{ jdbccfg.jdbc_url }}"
      - "JDBC cert ca .............. {{ jdbccfg.jdbc_cert_ca }}"
