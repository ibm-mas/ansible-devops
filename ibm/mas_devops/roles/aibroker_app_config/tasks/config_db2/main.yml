---
- name: "Read db2 config file"
  ansible.builtin.set_fact:
    db2cfg: "{{ lookup('file', '{{ mas_config_dir }}/jdbc-{{ mas_app_id }}-db2u.yml') | from_yaml_all }}"

- name: "Set dro mandatory vars"
  ansible.builtin.set_fact:
    db2cfg:
      db2_username: "{{ db2cfg[0].data.username }}"
      db2_password: "{{ db2cfg[0].data.password }}"
      db2_url: "{{ db2cfg[1].spec.config.url }}"
      db2_cert_ca: "{{ db2cfg[1].spec.certificates }}"

- name: "Debug: DB2 information" #TODO: remove before PR
  debug:
    msg:
      - "DB2 username ............. {{ db2cfg.db2_username }}"
      - "DB2 password ............. {{ db2cfg.db2_password }}"
      - "DB2 url .................. {{ db2cfg.db2_url }}"
      - "DB2 cert ca .............. {{ db2cfg.db2_cert_ca }}"
