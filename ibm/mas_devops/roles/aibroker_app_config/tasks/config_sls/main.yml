---
- name: "Read sls config file"
  ansible.builtin.set_fact:
    slscfg: "{{ lookup('file', '{{ mas_config_dir }}/sls.yml') | from_yaml_all }}"

- name: "Set sls mandatory vars"
  ansible.builtin.set_fact:
    slscfg:
      sls_secret_name: "{{ slscfg[0].metadata.name }}"
      sls_registration_key: "{{ slscfg[0].stringData.registrationKey }}"
      sls_url: "{{ slscfg[1].spec.config.url }}"
      sls_cert_ca: "{{ slscfg[1].spec.certificates }}"

- name: "Debug: sls information" #TODO: remove before PR
  debug:
    msg:
      - "sls secret name ......... {{ slscfg.sls_secret_name }}"
      - "sls registration key .... {{ slscfg.sls_registration_key }}"
      - "sls url ................. {{ slscfg.sls_url }}"
      - "sls cert ca ............. {{ slscfg.sls_cert_ca }}"
