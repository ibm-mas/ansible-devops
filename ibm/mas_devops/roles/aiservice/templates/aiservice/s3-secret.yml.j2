---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: km-s3-secret
  namespace: "{{ aiservice_namespace }}"
  annotations:
    serving.kserve.io/s3-endpoint: "{{ aiservice_s3_host_with_port }}"
    serving.kserve.io/s3-usehttps: "{{ (aiservice_s3_ssl == 'true') | ternary('1', '0') }}"
    {% if aiservice_s3_region != "" and aiservice_s3_region != "none" %}
    serving.kserve.io/s3-region: "{{ aiservice_s3_region }}"
    {% endif %}
data:
  AWS_ACCESS_KEY_ID: "{{ aiservice_s3_accesskey | b64encode }}"
  AWS_SECRET_ACCESS_KEY: "{{ aiservice_s3_secretkey | b64encode }}"

  S3_ACCESS_KEY: "{{ aiservice_s3_accesskey | b64encode }}"
  S3_SECRET_KEY: "{{ aiservice_s3_secretkey | b64encode }}"
  S3_HOST: "{{ aiservice_s3_host | b64encode }}"
  S3_PORT: "{{ aiservice_s3_port | b64encode }}"
  S3_REGION: "{{ aiservice_s3_region | b64encode }}"
  S3_SSL: "{{ aiservice_s3_ssl | b64encode }}"
