---
apiVersion: v1
kind: Secret
type: Opaque
metadata:
  name: km-s3-secret
  namespace: {{ aiservice_namespace }}
  annotations:
    serving.kserve.io/s3-endpoint: {{ aiservice_storage_host_with_port }}
    serving.kserve.io/s3-usehttps: {{ aiservice_storage_ssl == 'true' | ternary('1', '0') }}
    {% if aiservice_storage_region != "" %}
    serving.kserve.io/s3-region: {{ aiservice_storage_region }}
    {% endif %}
data:
  AWS_ACCESS_KEY_ID: "{{ aiservice_storage_accesskey | b64encode }}"
  AWS_SECRET_ACCESS_KEY: "{{ aiservice_storage_secretkey | b64encode }}"

  S3_ACCESS_KEY: "{{ aiservice_storage_accesskey | b64encode }}"
  S3_SECRET_KEY: "{{ aiservice_storage_secretkey | b64encode }}"
  S3_HOST: "{{ aiservice_storage_host | b64encode }}"
  S3_PORT: "{{ aiservice_storage_port | b64encode }}"
  S3_REGION: "{{ aiservice_storage_region | b64encode }}"
  S3_SSL: "{{ aiservice_storage_ssl | b64encode }}"
