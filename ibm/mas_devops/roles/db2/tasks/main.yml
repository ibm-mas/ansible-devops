---
- name: "Run the selected action"
  include_tasks: "tasks/{{ db2_action }}/main.yml"
  when:
    - db2_action != "none"
    - db2_action in ["install", "upgrade", "backup", "restore_database", "backup_database", "restore"]

- name: "Fail if db2_action is invalid"
  fail:
    msg: "db2_action must be one of ['install', 'upgrade', 'backup', 'restore_database', 'backup_database', 'restore']"
  when:
    - db2_action not in ["install", "upgrade", "backup", "restore_database", "backup_database", "restore"]
