---
# Create backup directory structure for backup
# -----------------------------------------------------------------------------

- name: "Set fact: backup directory paths"
  set_fact:
    backup_resources_path: "{{ backup_base_path }}/resources"
    backup_secrets_path: "{{ backup_base_path }}/resources/secrets"
    backup_configmaps_path: "{{ backup_base_path }}/resources/configmaps"
    backup_issuers_path: "{{ backup_base_path }}/resources/issuers"
    backup_certificates_path: "{{ backup_base_path }}/resources/certificates"
    backup_data_path: "{{ backup_base_path }}/data"

- name: "Create backup directories"
  file:
    path: "{{ item }}"
    state: directory
    mode: "0755"
  loop:
    - "{{ backup_base_path }}"
    - "{{ backup_resources_path }}"
    - "{{ backup_secrets_path }}"
    - "{{ backup_configmaps_path }}"
    - "{{ backup_issuers_path }}"
    - "{{ backup_certificates_path }}"
    - "{{ backup_data_path }}"