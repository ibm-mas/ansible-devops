<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>db2 - MAS DevOps Ansible Collection</title>

    <!-- Pure CSS (https://pure-css.github.io/) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/theme.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="../../js/theme.js"></script>

    <!-- Carbon theme zones (white, g10, g90, g100) -->
    <link rel="stylesheet" href="https://1.www.s81c.com/common/carbon/web-components/tag/latest/themes.css">

    <!-- The Carbon web-components/framework -->
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/ui-shell.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/accordion.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/breadcrumb.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/select.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/tabs.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/search.min.js"></script>

    <!-- HighlightJS code formatting support -->
    <link rel="stylesheet" id="hljs-light" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <link rel="stylesheet" id="hljs-dark" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- Required by MkDocs search -->
    <script>var base_url = "../..";</script>

    <!-- User defined extras -->
    
    

    

    
    <script src="../../search/main.js"></script>
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: black; }
        </style></head>

  <body class="md-grid" data-theme-default="g90">
    <!-- Header -->
    <cds-header aria-label="MAS DevOps Ansible Collection" class="md-header">
      <cds-header-menu-button button-label-active="Close menu" button-label-inactive="Open menu"></cds-header-menu-button>
      <cds-header-name href="../.." prefix="IBM">MAS DevOps Ansible Collection</cds-header-name>
      <cds-header-nav menu-bar-label="IBM MAS DevOps Ansible Collection">
          <cds-header-nav-item is-active target="" href="">Ansible</cds-header-nav-item>
          <cds-header-nav-item target="" href="https://ibm-mas.github.io/cli/">CLI</cds-header-nav-item>
      </cds-header-nav>

      <div class="cds--header__global">
<div class="md-theme-toggle" data-theme-default="g90">
  <button class="md-theme-toggle__button" aria-label="Toggle theme" title="Toggle theme">
    <svg class="md-theme-toggle__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"></path>
    </svg>
  </button>
  <div class="md-theme-toggle__menu" hidden>
    <button class="md-theme-toggle__option" data-theme="white">
      <span class="md-theme-toggle__label">Light</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--white"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g10">
      <span class="md-theme-toggle__label">Light Gray</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g10"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g90">
      <span class="md-theme-toggle__label">Dark Gray</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g90"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g100">
      <span class="md-theme-toggle__label">Dark</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g100"></span>
    </button>
  </div>
</div>
        <cds-search id="header-search" label-text="Search" cds-search-input="search-event" expandable></cds-search>
      </div>
      <script>
        var el = document.getElementById("header-search");
        el.addEventListener("cds-search-input", function (ev) {
          console.info(ev.detail.value)
          document.getElementById("header-search-value").setAttribute("value", ev.detail.value);
        });
        el.addEventListener('keydown', function (ev) {
          if (ev.key === 'Enter') {
            location.href="../../search.html?q=" + document.querySelector("#header-search").shadowRoot.querySelector("#input").value;
          }
        });
      </script>

      
    </cds-header>

    <!-- Main container with three-column layout -->
    <div class="md-container">
      <!-- Left sidebar - Navigation -->
      <aside class="md-sidebar md-sidebar--primary" data-md-component="sidebar">
        <div class="md-sidebar__scrollwrap">
          <div class="md-sidebar__inner">
            <cds-side-nav aria-label="Side navigation">
              <cds-side-nav-items>
                
                  
  <cds-side-nav-menu title="General Information">
    
      
  <cds-side-nav-menu-item href="../..">
    Home
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../execution-environment/">
    Ansible Automation Platform
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Playbooks">
    
      
  <cds-side-nav-menu-item href="../../playbooks/ocp/">
    OCP
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/cp4d/">
    Install Cloud Pak For Data
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/aiservice/">
    Install AI Service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-core/">
    Install Core
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-iot/">
    Add IoT
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-manage/">
    Add Manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-monitor/">
    Add Monitor
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-optimizer/">
    Add Optimizer
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-predict/">
    Add Predict
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-visualinspection/">
    Add Visual Inspection
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-facilities/">
    Add Real Estate and Facilities
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-update/">
    Update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-upgrade/">
    Upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/backup-restore/">
    Backup &amp; Restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: OCP Mgmt">
    
      
  <cds-side-nav-menu-item href="../ocp_cluster_monitoring/">
    ocp_cluster_monitoring
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_config/">
    ocp_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_deprovision/">
    ocp_deprovision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_efs/">
    ocp_efs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_github_oauth/">
    ocp_github_oauth
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_login/">
    ocp_login
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_node_config/">
    ocp_node_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_provision/">
    ocp_provision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_roks_upgrade_registry_storage/">
    ocp_roks_upgrade_registry_storage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_upgrade/">
    ocp_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_verify/">
    ocp_verify
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Dependency Mgmt" active expanded>
    
      
  <cds-side-nav-menu-item href="../aws_bucket_access_point/">
    aws_bucket_access_point
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_documentdb_user/">
    aws_documentdb_user
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_policy/">
    aws_policy
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_route53/">
    aws_route53
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_user_creation/">
    aws_user_creation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_vpc/">
    aws_vpc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cert_manager/">
    cert_manager
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cis/">
    cis
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../configure_manage_eventstreams/">
    configure_manage_eventstreams
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos/">
    cos
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos_bucket/">
    cos_bucket
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_admin_pwd_update/">
    cp4d_admin_pwd_update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d/">
    cp4d
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_service/">
    cp4d_service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="./" active expanded>
    db2
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../dro/">
    dro
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../eck/">
    eck
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../grafana/">
    grafana
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ibm_catalogs/">
    ibm_catalogs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../kafka/">
    kafka
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../longhorn/">
    longhorn
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../nvidia_gpu/">
    nvidia_gpu
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mongodb/">
    mongodb
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocs/">
    ocs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../sls/">
    sls
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../turbonomic/">
    turbonomic
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Image Mirroring">
    
      
  <cds-side-nav-menu-item href="../mirror_case_prepare/">
    mirror_case_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_extras_prepare/">
    mirror_extras_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_images/">
    mirror_images
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_ocp/">
    mirror_ocp
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_idms/">
    ocp_idms
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_simulate_disconnected_network/">
    ocp_simulate_disconnected_network
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../registry/">
    registry
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Suite Mgmt">
    
      
  <cds-side-nav-menu-item href="../suite_app_config/">
    suite_app_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_install/">
    suite_app_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_uninstall/">
    suite_app_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_upgrade/">
    suite_app_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_rollback/">
    suite_app_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_backup_restore/">
    suite_app_backup_restore
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_certs/">
    suite_certs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_config/">
    suite_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_db2_setup_for_manage/">
    suite_db2_setup_for_manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_dns/">
    suite_dns
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_install/">
    suite_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_attachments_config/">
    suite_manage_attachments_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_birt_report_config/">
    suite_manage_birt_report_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_bim_config/">
    suite_manage_bim_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_customer_files_config/">
    suite_manage_customer_files_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_imagestitching_config/">
    suite_manage_imagestitching_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_import_certs_config/">
    suite_manage_import_certs_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_load_dbc_scripts/">
    suite_manage_load_dbc_scripts
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_logging_config/">
    suite_manage_logging_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_pvc_config/">
    suite_manage_pvc_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_uninstall/">
    suite_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_upgrade/">
    suite_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_rollback/">
    suite_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_verify/">
    suite_verify
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_backup_restore/">
    suite_backup_restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Utilities">
    
      
  <cds-side-nav-menu-item href="../ansible_version_check/">
    ansible_version_check
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../entitlement_key_rotation/">
    entitlement_key_rotation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_jdbc/">
    gencfg_jdbc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_watsonstudio/">
    gencfg_watsonstudio
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_workspace/">
    gencfg_workspace
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_mongo/">
    gencfg_mongo
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
              </cds-side-nav-items>
            </cds-side-nav>
          </div>
        </div>
      </aside>

      <!-- Main content area -->
      <div class="md-content" data-md-component="content">
        <article class="md-content__inner">
          <!-- Breadcrumbs -->
          <div class="md-breadcrumbs"><cds-breadcrumb no-trailing-slash>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="../..">Home</cds-breadcrumb-link>
  </cds-breadcrumb-item>
      <cds-breadcrumb-item>Roles: Dependency Mgmt</cds-breadcrumb-item>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="#db2">db2</cds-breadcrumb-link>
  </cds-breadcrumb-item>

  <cds-breadcrumb-item aria-current="page">
    <cds-select id="breadcrumbs-toc" inline placeholder="..." oninput="changeAnchor(this.value)">
    
    
      <cds-select-item value="#role-variables">Role Variables</cds-select-item>
    
      <cds-select-item value="#role-variables-db2ucluster-database-configuration-settings">Role Variables - DB2UCluster Database Configuration Settings</cds-select-item>
    
      <cds-select-item value="#role-variables-backup-and-restore">Role Variables - Backup and Restore</cds-select-item>
    
      <cds-select-item value="#example-playbook">Example Playbook</cds-select-item>
    
      <cds-select-item value="#run-role-playbook">Run Role Playbook</cds-select-item>
    
      <cds-select-item value="#license">License</cds-select-item>
    
    </cds-select>
  </cds-breadcrumb-item>
</cds-breadcrumb>
          </div>

          <!-- Page content -->
          <div class="rst-content">
            
            <h1 id="db2">db2<a class="headerlink" href="#db2" title="Permanent link">¤</a></h1>
<p>This role creates or upgrades a Db2 instance using the Db2u Operator. When installing db2, the db2u operator will now be installed into the same namespace as the db2 instance (<code>db2ucluster</code>). If you already have db2 operator and db2 instances running in separate namespaces, this role will take care of migrating (by deleting &amp; reinstalling) the db2 operators from <code>ibm-common-services</code> to the namespace defined by <code>db2_namespace</code> property (in case of a new role execution for a db2 install or db2 upgrade). A private root CA certificate is created and is used to secure the TLS connections to the database. A Db2 Warehouse cluster will be created along with a public TLS encrypted route to allow external access to the cluster (access is via the ssl-server nodeport port on the <em>-db2u-engn-svc service). Internal access is via the </em>-db2u-engn-svc service and port 50001. Both the external route and the internal service use the same server certificate.</p>
<p>The private root CA certificate and the server certificate are available from the <code>db2u-ca</code> and <code>db2u-certificate</code> secrets in the db2 namespace.  The default user is <code>db2inst1</code> and the password is available in the <code>instancepassword</code> secret in the same namespace.  You can examine the deployed resources in the db2 namespace. This example assumes the default namespace <code>db2u</code>:</p>
<pre><code class="language-bash">oc -n db2u get db2ucluster

NAME        STATE   MAINTENANCESTATE   AGE
db2u-db01   Ready   None               29m
</code></pre>
<p>It typically takes 20-30 minutes from the db2ucluster being created till it is ready. If the db2ucluster is not ready after that period then check that all the PersistentVolumeClaims in the db2 namespace are ready and that the pods in the namespace are not stuck in init state. If the <code>c-&lt;db2_instance_name&gt;-db2u-0</code> pod is running then you can exec into the pod and check the <code>/var/log/db2u.log</code> for any issue.</p>
<p>If the <code>mas_instance_id</code> and <code>mas_config_dir</code> are provided then the role will generate the JdbcCfg yaml that can be used to configure MAS to connect to this database. It does not apply the yaml to the cluster but does provide you with the yaml files to apply if needed.</p>
<p>When upgrading db2, specify the existing namespace where the <code>db2uCluster</code> instances exist. All the instances under that namespace will be upgraded to the db2 version specified. The version of db2 <strong>must</strong> match the channel of db2 being used for the upgrade.</p>
<h2 id="role-variables">Role Variables<a class="headerlink" href="#role-variables" title="Permanent link">¤</a></h2>
<h3 id="installation-variables">Installation Variables<a class="headerlink" href="#installation-variables" title="Permanent link">¤</a></h3>
<h4 id="common_services_namespace">common_services_namespace<a class="headerlink" href="#common_services_namespace" title="Permanent link">¤</a></h4>
<p>Namespace where IBM Common Services is installed.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>COMMON_SERVICES_NAMESPACE</code></li>
<li>Default Value: <code>ibm-common-services</code></li>
</ul>
<h4 id="db2_action">db2_action<a class="headerlink" href="#db2_action" title="Permanent link">¤</a></h4>
<p>Inform the role whether to perform an install, upgrade, backup or restore of DB2 Database. This can be set to <code>install</code>, <code>upgrade</code>, <code>backup</code> or <code>restore</code>. When <code>DB2_ACTION</code> is set to upgrade, then all instances in the <code>DB2_NAMESPACE</code> will be upgraded to the <code>DB2_VERSION</code>.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_ACTION</code></li>
<li>Default: <code>install</code></li>
</ul>
<h4 id="db2_namespace">db2_namespace<a class="headerlink" href="#db2_namespace" title="Permanent link">¤</a></h4>
<p>Name of the namespace where Db2 operators and Db2 instances (DB2UCluster custom resources) will be created</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_NAMESPACE</code></li>
<li>Default: <code>db2u</code></li>
</ul>
<h4 id="db2_channel">db2_channel<a class="headerlink" href="#db2_channel" title="Permanent link">¤</a></h4>
<p>The subscription channel for the DB2 Universal Operator.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_CHANNEL</code></li>
<li>Default: The default channel, as defined in the operator package, will be used if this is not set.</li>
</ul>
<h4 id="db2_instance_name">db2_instance_name<a class="headerlink" href="#db2_instance_name" title="Permanent link">¤</a></h4>
<p>Name of the database instance, note that this is the instance <strong>name</strong>.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>DB2_INSTANCE_NAME</code></li>
<li>Default: None</li>
</ul>
<h4 id="ibm_entitlement_key">ibm_entitlement_key<a class="headerlink" href="#ibm_entitlement_key" title="Permanent link">¤</a></h4>
<p>Provide your <a href="https://myibm.ibm.com/products-services/containerlibrary">IBM entitlement key</a>.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>IBM_ENTITLEMENT_KEY</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_dbname">db2_dbname<a class="headerlink" href="#db2_dbname" title="Permanent link">¤</a></h4>
<p>Name of the database within the instance.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_DBNAME</code></li>
<li>Default: <code>BLUDB</code></li>
</ul>
<h4 id="db2_version">db2_version<a class="headerlink" href="#db2_version" title="Permanent link">¤</a></h4>
<p>Version of the DB2 engine to be used while creating/upgrading the DB2 instances.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_VERSION</code></li>
<li>Default: The default db2 engine version will be automatically defined to the latest version supported by the installed DB2 operator if this is not set. The DB2 engine versions supported by the installed DB2 operator are stored in <code>db2u-release</code> configmap under <code>ibm-common-services</code> namespace.</li>
</ul>
<h4 id="db2_type">db2_type<a class="headerlink" href="#db2_type" title="Permanent link">¤</a></h4>
<p>Type of the DB2 instance. Available options are <code>db2wh</code> and <code>db2oltp</code>.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_TYPE</code></li>
<li>Default: <code>db2wh</code></li>
</ul>
<h4 id="db2_timezone">db2_timezone<a class="headerlink" href="#db2_timezone" title="Permanent link">¤</a></h4>
<p>Server timezone code of the DB2 instance. If you want to align the same timezone with Manage's DB2 database, you also need to must also set <code>MAS_APP_SETTINGS_SERVER_TIMEZONE</code> variable to the same value.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_TIMEZONE</code></li>
<li>Default: <code>GMT</code></li>
</ul>
<h4 id="db2_4k_device_support">db2_4k_device_support<a class="headerlink" href="#db2_4k_device_support" title="Permanent link">¤</a></h4>
<p>Whether 4K device support is turned on or not.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_4K_DEVICE_SUPPORT</code></li>
<li>Default: <code>ON</code></li>
</ul>
<h4 id="db2_workload">db2_workload<a class="headerlink" href="#db2_workload" title="Permanent link">¤</a></h4>
<p>The workload profile of the db2 instance, possible values are <code>PUREDATA_OLAP</code> or <code>ANALYTICS</code>.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_WORKLOAD</code></li>
<li>Default: <code>ANALYTICS</code></li>
</ul>
<h4 id="db2_table_org">db2_table_org<a class="headerlink" href="#db2_table_org" title="Permanent link">¤</a></h4>
<p>The way database tables will be organized. It can be set to either <code>ROW</code> or <code>COLUMN</code>.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_TABLE_ORG</code></li>
<li>Default: <code>ROW</code></li>
</ul>
<h4 id="db2_ldap_username">db2_ldap_username<a class="headerlink" href="#db2_ldap_username" title="Permanent link">¤</a></h4>
<p>Define the username of db2 in the local LDAP registry. If this is defined, the LDAP user will be the user identity passed into the MAS JDBC configuration.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_LDAP_USERNAME</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_ldap_password">db2_ldap_password<a class="headerlink" href="#db2_ldap_password" title="Permanent link">¤</a></h4>
<p>Define the password of above db2 user in the local LDAP registry. Must define when <code>db2_ldap_username</code> is used.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_LDAP_PASSWORD</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_rotate_password">db2_rotate_password<a class="headerlink" href="#db2_rotate_password" title="Permanent link">¤</a></h4>
<p>Determines if the role should rotate the LDAP password for current LDAP user configured within Db2 for MAS. When using this capability, LDAP user password will auto generated by this role and configured with MAS.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_LDAP_ROTATE_PASSWORD</code></li>
<li>Default: False</li>
</ul>
<h3 id="storage-variables">Storage Variables<a class="headerlink" href="#storage-variables" title="Permanent link">¤</a></h3>
<p>We recommend reviewing the Db2 documentation about the certified storage options for Db2 on Red Hat OpenShift. Please ensure your storage class meets the specified deployment requirements for Db2. <a href="https://www.ibm.com/docs/en/db2/11.5?topic=storage-certified-options">https://www.ibm.com/docs/en/db2/11.5?topic=storage-certified-options</a></p>
<h4 id="db2_meta_storage_class">db2_meta_storage_class<a class="headerlink" href="#db2_meta_storage_class" title="Permanent link">¤</a></h4>
<p>Storage class used for metadata. This must support ReadWriteMany(RWX) access mode.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>DB2_META_STORAGE_CLASS</code></li>
<li>Default: Defaults to <code>ibmc-file-gold</code> if the storage class is available in the cluster.</li>
</ul>
<h4 id="db2_meta_storage_size">db2_meta_storage_size<a class="headerlink" href="#db2_meta_storage_size" title="Permanent link">¤</a></h4>
<p>Size of the metadata persistent volume, in gigabytes</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_META_STORAGE_SIZE</code></li>
<li>Default: <code>10Gi</code></li>
</ul>
<h4 id="db2_meta_storage_accessmode">db2_meta_storage_accessmode<a class="headerlink" href="#db2_meta_storage_accessmode" title="Permanent link">¤</a></h4>
<p>The access mode for the storage.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_META_STORAGE_ACCESSMODE</code></li>
<li>Default: <code>ReadWriteMany</code></li>
</ul>
<h4 id="db2_data_storage_class">db2_data_storage_class<a class="headerlink" href="#db2_data_storage_class" title="Permanent link">¤</a></h4>
<p>Storage class used for user data. This must support ReadWriteOnce(RWO) access mode.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>DB2_DATA_STORAGE_CLASS</code></li>
<li>Default: Defaults to <code>ibmc-block-gold</code> if the storage class is available in the cluster.</li>
</ul>
<h4 id="db2_data_storage_size">db2_data_storage_size<a class="headerlink" href="#db2_data_storage_size" title="Permanent link">¤</a></h4>
<p>Size of data persistent volume.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_DATA_STORAGE_SIZE</code></li>
<li>Default: <code>50Gi</code></li>
</ul>
<h4 id="db2_data_storage_accessmode">db2_data_storage_accessmode<a class="headerlink" href="#db2_data_storage_accessmode" title="Permanent link">¤</a></h4>
<p>The access mode for the storage.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_DATA_STORAGE_ACCESSMODE</code></li>
<li>Default: <code>ReadWriteOnce</code></li>
</ul>
<h4 id="db2_backup_storage_class">db2_backup_storage_class<a class="headerlink" href="#db2_backup_storage_class" title="Permanent link">¤</a></h4>
<p>Storage class used for backup. This must support ReadWriteMany(RWX) access mode.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_BACKUP_STORAGE_CLASS</code></li>
<li>Default: Defaults to <code>ibmc-file-gold</code> if the storage class is available in the cluster. Set to <code>None</code> will drop the backup storage on DB2ucluster CR.</li>
</ul>
<h4 id="db2_backup_storage_size">db2_backup_storage_size<a class="headerlink" href="#db2_backup_storage_size" title="Permanent link">¤</a></h4>
<p>Size of backup persistent volume.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_BACKUP_STORAGE_SIZE</code></li>
<li>Default: <code>50Gi</code></li>
</ul>
<h4 id="db2_backup_storage_accessmode">db2_backup_storage_accessmode<a class="headerlink" href="#db2_backup_storage_accessmode" title="Permanent link">¤</a></h4>
<p>The access mode for the storage.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_BACKUP_STORAGE_ACCESSMODE</code></li>
<li>Default: <code>ReadWriteMany</code></li>
</ul>
<h4 id="db2_logs_storage_class">db2_logs_storage_class<a class="headerlink" href="#db2_logs_storage_class" title="Permanent link">¤</a></h4>
<p>Storage class used for transaction logs. This must support ReadWriteOnce(RWO) access mode.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_LOGS_STORAGE_CLASS</code></li>
<li>Default: Defaults to <code>ibmc-block-gold</code> if the storage class is available in the cluster. Set to <code>None</code> will drop the logs storage on DB2ucluster CR.</li>
</ul>
<h4 id="db2_logs_storage_size">db2_logs_storage_size<a class="headerlink" href="#db2_logs_storage_size" title="Permanent link">¤</a></h4>
<p>Size of transaction logs persistent volume.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_LOGS_STORAGE_SIZE</code></li>
<li>Default: <code>10Gi</code></li>
</ul>
<h4 id="db2_logs_storage_accessmode">db2_logs_storage_accessmode<a class="headerlink" href="#db2_logs_storage_accessmode" title="Permanent link">¤</a></h4>
<p>The access mode for the storage.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_LOGS_STORAGE_ACCESSMODE</code></li>
<li>Default: <code>ReadWriteOnce</code></li>
</ul>
<h4 id="db2_temp_storage_class">db2_temp_storage_class<a class="headerlink" href="#db2_temp_storage_class" title="Permanent link">¤</a></h4>
<p>Storage class used for temporary data. This must support ReadWriteMany(RWX) access mode.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_TEMP_STORAGE_CLASS</code></li>
<li>Default: Defaults to <code>ibmc-block-gold</code> if the storage class is available in the cluster. Set to <code>None</code> will drop the tempts storage on DB2ucluster CR.</li>
</ul>
<h4 id="db2_temp_storage_size">db2_temp_storage_size<a class="headerlink" href="#db2_temp_storage_size" title="Permanent link">¤</a></h4>
<p>Size of temporary persistent volume.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_TEMP_STORAGE_SIZE</code></li>
<li>Default: <code>10Gi</code></li>
</ul>
<h4 id="db2_temp_storage_accessmode">db2_temp_storage_accessmode<a class="headerlink" href="#db2_temp_storage_accessmode" title="Permanent link">¤</a></h4>
<p>The access mode for the storage. This must support ReadWriteOnce(RWO) access mode.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_TEMP_STORAGE_ACCESSMODE</code></li>
<li>Default: <code>ReadWriteOnce</code></li>
</ul>
<h3 id="resource-request-variables">Resource Request Variables<a class="headerlink" href="#resource-request-variables" title="Permanent link">¤</a></h3>
<p>These variables allow you to customize the resources available to the Db2 pod in your cluster.  In most circumstances you will want to set these properties because it's impossible for us to provide a default value that will be appropriate for all users.  We have set defaults that are suitable for deploying Db2 onto a dedicated worker node with 4cpu and 16gb memory.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Note that you must take into account the system overhead on any given node when setting these parameters, if you set the requests equal to the number of CPU or amount of memory on your node then the scheduler will not be able to schedule the Db2 pod because not 100% of the worker nodes' resource will be available to pod on that node, even if there's only a single pod on it.</p>
<p>Db2 is sensitive to both CPU and memory issues, particularly memory, we recommend setting requests and limits to the same values, ensuring the scheduler always reserves the resources that Db2 expects to be available to it.</p>
</div>
<h4 id="db2_cpu_requests">db2_cpu_requests<a class="headerlink" href="#db2_cpu_requests" title="Permanent link">¤</a></h4>
<p>Define the Kubernetes CPU request for the Db2 pod.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_CPU_REQUESTS</code></li>
<li>Default: <code>4000m</code></li>
</ul>
<h4 id="db2_cpu_limits">db2_cpu_limits<a class="headerlink" href="#db2_cpu_limits" title="Permanent link">¤</a></h4>
<p>Define the Kubernetes CPU limit for the Db2 pod.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_CPU_LIMITS</code></li>
<li>Default: <code>6000m</code></li>
</ul>
<h4 id="db2_memory_requests">db2_memory_requests<a class="headerlink" href="#db2_memory_requests" title="Permanent link">¤</a></h4>
<p>Define the Kubernetes memory request for the Db2 pod.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_MEMORY_REQUESTS</code></li>
<li>Default: <code>8Gi</code></li>
</ul>
<h4 id="db2_memory_limits">db2_memory_limits<a class="headerlink" href="#db2_memory_limits" title="Permanent link">¤</a></h4>
<p>Define the Kubernetes memory limit for the Db2 pod.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_MEMORY_LIMITS</code></li>
<li>Default: <code>16Gi</code></li>
</ul>
<h3 id="node-label-affinity-variables">Node Label Affinity Variables<a class="headerlink" href="#node-label-affinity-variables" title="Permanent link">¤</a></h3>
<p>Specify both <code>db2_affinity_key</code> and <code>db2_affinity_value</code> to configure <code>requiredDuringSchedulingIgnoredDuringExecution</code> affinity with appropriately labelled nodes.</p>
<h4 id="db2_affinity_key">db2_affinity_key<a class="headerlink" href="#db2_affinity_key" title="Permanent link">¤</a></h4>
<p>Specify the key of a node label to declare affinity with.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_AFFINITY_KEY</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_affinity_value">db2_affinity_value<a class="headerlink" href="#db2_affinity_value" title="Permanent link">¤</a></h4>
<p>Specify the value of a node label to declare affinity with.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_AFFINITY_VALUE</code></li>
<li>Default: None</li>
</ul>
<h3 id="node-taint-toleration-variables">Node Taint Toleration Variables<a class="headerlink" href="#node-taint-toleration-variables" title="Permanent link">¤</a></h3>
<p>Specify <code>db2_tolerate_key</code>, <code>db2_tolerate_value</code>, and <code>db2_tolerate_effect</code> to configure a toleration policy to allow the db2 instance to be scheduled on nodes with the specified taint.</p>
<h4 id="db2_tolerate_key">db2_tolerate_key<a class="headerlink" href="#db2_tolerate_key" title="Permanent link">¤</a></h4>
<p>Specify the key of the taint that is to be tolerated.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_TOLERATE_KEY</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_tolerate_value">db2_tolerate_value<a class="headerlink" href="#db2_tolerate_value" title="Permanent link">¤</a></h4>
<p>Specify the value of the taint that is to be tolerated.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_TOLERATE_VALUE</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_tolerate_effect">db2_tolerate_effect<a class="headerlink" href="#db2_tolerate_effect" title="Permanent link">¤</a></h4>
<p>Specify the type of taint effect that will be tolerated (<code>NoSchedule</code>, <code>PreferNoSchedule</code>, or <code>NoExecute</code>).</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_TOLERATE_EFFECT</code></li>
<li>Default: None</li>
</ul>
<h2 id="role-variables-db2ucluster-database-configuration-settings">Role Variables - DB2UCluster Database Configuration Settings<a class="headerlink" href="#role-variables-db2ucluster-database-configuration-settings" title="Permanent link">¤</a></h2>
<p>The following variables will overwrite DB2UCluster default properties for the DB2 configuration sections:</p>
<ul>
<li><code>spec.environment.database.dbConfig</code></li>
<li><code>spec.environment.instance.dbmConfig</code></li>
<li><code>spec.environment.instance.registry</code></li>
</ul>
<h4 id="db2_database_db_config">db2_database_db_config<a class="headerlink" href="#db2_database_db_config" title="Permanent link">¤</a></h4>
<p>Overwrites the db2ucluster database configuration settings under <code>spec.environment.database.dbConfig</code> section.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_DATABASE_DB_CONFIG</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_instance_dbm_config">db2_instance_dbm_config<a class="headerlink" href="#db2_instance_dbm_config" title="Permanent link">¤</a></h4>
<p>Overwrites the db2ucluster instance database configuration settings under <code>spec.environment.instance.dbmConfig</code> section.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Do not set <a href="https://www.ibm.com/docs/en/db2/11.5?topic=parameters-instance-memory-instance-memory">instance_memory</a>.  The Db2 engine does not know Db2 is running inside a container, setting <code>dbmConfig.INSTANCE_MEMORY: automatic</code> will cause it to read the cgroups of the node and potentially go beyond the pod memory limit.  Db2U has logic built in to use a normalized percentage that takes into account the memory limit and free memory of the node.</p>
</div>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DB2_INSTANCE_DBM_CONFIG</code></li>
<li>Default: None</li>
</ul>
<h4 id="db2_instance_registry">db2_instance_registry<a class="headerlink" href="#db2_instance_registry" title="Permanent link">¤</a></h4>
<p>Overwrites the db2ucluster instance database configuration settings under <code>spec.environment.instance.registry</code> section. You can define parameters to be included in this section using semicolon separated values.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_INSTANCE_REGISTRY</code></li>
<li>Default: None</li>
</ul>
<h3 id="mpp-system-variables">MPP System Variables<a class="headerlink" href="#mpp-system-variables" title="Permanent link">¤</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not use these variables if you intend to use the Db2 instance with IBM Maximo Application Suite; no MAS application supports Db2 MPP</p>
</div>
<h4 id="db2_mln_count">db2_mln_count<a class="headerlink" href="#db2_mln_count" title="Permanent link">¤</a></h4>
<p>The number of logical nodes (i.e. database partitions to create). Note: ensure that the application using this Db2 can support Db2 MPP (which is created when <code>DB2_MLN_COUNT</code> is greater than 1).</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>'DB2_MLN_COUNT</code></li>
<li>Default: 1</li>
</ul>
<h4 id="db2_num_pods">db2_num_pods<a class="headerlink" href="#db2_num_pods" title="Permanent link">¤</a></h4>
<p>The number of Db2 pods to create in the instance. Note that <code>db2_num_pods</code> must be less than or equal to <code>db2_mln_count</code>.  A single db2u pod can contain multiple logical nodes. So be sure to avoid specifying a large number for <code>db2_mln_count</code> while specifying a small number for <code>db2_num_pods</code>. If in doubt, make <code>db2_mln_count = db2_num_pods</code>. For more information refer to the <a href="https://www.ibm.com/docs/en/db2-warehouse?topic=SSCJDQ/com.ibm.swg.im.dashdb.ucontainer.doc/doc/db2w-mempernode-new.html">Db2 documentation</a>.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>DB2_NUM_PODS</code></li>
<li>Default: 1</li>
</ul>
<h3 id="mas-configuration-variables">MAS Configuration Variables<a class="headerlink" href="#mas-configuration-variables" title="Permanent link">¤</a></h3>
<h4 id="mas_instance_id">mas_instance_id<a class="headerlink" href="#mas_instance_id" title="Permanent link">¤</a></h4>
<p>Providing this and <code>mas_config_dir</code> will instruct the role to generate a JdbcCfg template that can be used to configure MAS to connect to this database.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>MAS_INSTANCE_ID</code></li>
<li>Default: None</li>
</ul>
<h4 id="mas_config_dir">mas_config_dir<a class="headerlink" href="#mas_config_dir" title="Permanent link">¤</a></h4>
<p>Providing this and <code>mas_instance_id</code> will instruct the role to generate a JdbcCfg template that can be used to configure MAS to connect to this database.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>MAS_CONFIG_DIR</code></li>
<li>Default: None</li>
</ul>
<h4 id="mas_config_scope">mas_config_scope<a class="headerlink" href="#mas_config_scope" title="Permanent link">¤</a></h4>
<p>Supported values are <code>system</code>, <code>ws</code>, <code>app</code>, or <code>wsapp</code>, this is only used when both <code>mas_config_dir</code> and <code>mas_instance_id</code> are set.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>MAS_CONFIG_SCOPE</code></li>
<li>Default: <code>system</code></li>
</ul>
<h4 id="mas_workspace_id">mas_workspace_id<a class="headerlink" href="#mas_workspace_id" title="Permanent link">¤</a></h4>
<p>This is only used when both <code>mas_config_dir</code> and <code>mas_instance_id</code> are set, and <code>mas_config_scope</code> is set to either <code>ws</code> or <code>wsapp</code></p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>MAS_WORKSPACE_ID</code></li>
<li>Default: None</li>
</ul>
<h4 id="mas_application_id">mas_application_id<a class="headerlink" href="#mas_application_id" title="Permanent link">¤</a></h4>
<p>This is only used when both <code>mas_config_dir</code> and <code>mas_instance_id</code> are set, and <code>mas_config_scope</code> is set to either <code>app</code> or <code>wsapp</code></p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>'MAS_APP_ID</code></li>
<li>Default: None</li>
</ul>
<h2 id="role-variables-backup-and-restore">Role Variables - Backup and Restore<a class="headerlink" href="#role-variables-backup-and-restore" title="Permanent link">¤</a></h2>
<h4 id="masbr_confirm_cluster">masbr_confirm_cluster<a class="headerlink" href="#masbr_confirm_cluster" title="Permanent link">¤</a></h4>
<p>Set <code>true</code> or <code>false</code> to indicate the role whether to confirm the currently connected cluster before running the backup or restore job.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>MASBR_CONFIRM_CLUSTER</code></li>
<li>Default: <code>false</code></li>
</ul>
<h4 id="masbr_copy_timeout_sec">masbr_copy_timeout_sec<a class="headerlink" href="#masbr_copy_timeout_sec" title="Permanent link">¤</a></h4>
<p>Set the transfer files timeout in seconds.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>MASBR_COPY_TIMEOUT_SEC</code></li>
<li>Default: <code>43200</code> (12 hours)</li>
</ul>
<h4 id="masbr_job_timezone">masbr_job_timezone<a class="headerlink" href="#masbr_job_timezone" title="Permanent link">¤</a></h4>
<p>Set the <a href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">time zone</a> for creating scheduled backup job. If not set a value for this variable, this role will use UTC time zone when creating a CronJob for running scheduled backup job.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>MASBR_JOB_TIMEZONE</code></li>
<li>Default: None</li>
</ul>
<h4 id="masbr_storage_local_folder">masbr_storage_local_folder<a class="headerlink" href="#masbr_storage_local_folder" title="Permanent link">¤</a></h4>
<p>Set local path to save the backup files.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>MASBR_STORAGE_LOCAL_FOLDER</code></li>
<li>Default: None</li>
</ul>
<h4 id="masbr_backup_type">masbr_backup_type<a class="headerlink" href="#masbr_backup_type" title="Permanent link">¤</a></h4>
<p>Set <code>full</code> or <code>incr</code> to indicate the role to create a full backup or incremental backup.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>MASBR_BACKUP_TYPE</code></li>
<li>Default: <code>full</code></li>
</ul>
<h4 id="masbr_backup_from_version">masbr_backup_from_version<a class="headerlink" href="#masbr_backup_from_version" title="Permanent link">¤</a></h4>
<p>Set the full backup version to use in the incremental backup, this will be in the format of a <code>YYYMMDDHHMMSS</code> timestamp (e.g. <code>20240621021316</code>). This variable is only valid when <code>MASBR_BACKUP_TYPE=incr</code>. If not set a value for this variable, this role will try to find the latest full backup version from the specified storage location.</p>
<ul>
<li><strong>Optional</strong></li>
<li>Environment Variable: <code>MASBR_BACKUP_FROM_VERSION</code></li>
<li>Default: None</li>
</ul>
<h4 id="masbr_backup_schedule">masbr_backup_schedule<a class="headerlink" href="#masbr_backup_schedule" title="Permanent link">¤</a></h4>
<p>Set <a href="ttps://en.wikipedia.org/wiki/Cron">Cron expression</a> to create a scheduled backup. If not set a value for this varialbe, this role will create an on-demand backup.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>MASBR_BACKUP_SCHEDULE</code></li>
<li>Default: None</li>
</ul>
<h4 id="masbr_restore_from_version">masbr_restore_from_version<a class="headerlink" href="#masbr_restore_from_version" title="Permanent link">¤</a></h4>
<p>Set the backup version to use in the restore, this will be in the format of a <code>YYYMMDDHHMMSS</code> timestamp (e.g. <code>20240621021316</code>)</p>
<ul>
<li><strong>Required</strong> only when <code>DB2_ACTION=restore</code></li>
<li>Environment Variable: <code>MASBR_RESTORE_FROM_VERSION</code></li>
<li>Default: None</li>
</ul>
<h2 id="example-playbook">Example Playbook<a class="headerlink" href="#example-playbook" title="Permanent link">¤</a></h2>
<h3 id="install-db2">Install Db2<a class="headerlink" href="#install-db2" title="Permanent link">¤</a></h3>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    ibm_entitlement_key: xxxxx

    # Configuration for the Db2 cluster
    db2_instance_name: db2u-db01

    db2_meta_storage_class: "ibmc-file-gold"
    db2_data_storage_class: "ibmc-block-gold"
    db2_backup_storage_class: "ibmc-file-gold"
    db2_logs_storage_class: "ibmc-block-gold"
    db2_temp_storage_class: "ibmc-block-gold"

    # Create the MAS JdbcCfg &amp; Secret resource definitions
    mas_instance_id: inst1
    mas_config_dir: /home/david/masconfig
  roles:
    - ibm.mas_devops.db2
</code></pre>
<h3 id="backup-db2">Backup Db2<a class="headerlink" href="#backup-db2" title="Permanent link">¤</a></h3>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    db2_action: backup
    db2_instance_name: db2u-db01
    masbr_storage_local_folder: /tmp/masbr
  roles:
    - ibm.mas_devops.db2
</code></pre>
<h3 id="restore-db2">Restore Db2<a class="headerlink" href="#restore-db2" title="Permanent link">¤</a></h3>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    db2_action: restore
    db2_instance_name: db2u-db01
    masbr_restore_from_version: 20240621021316
    masbr_storage_local_folder: /tmp/masbr
  roles:
    - ibm.mas_devops.db2
</code></pre>
<h2 id="run-role-playbook">Run Role Playbook<a class="headerlink" href="#run-role-playbook" title="Permanent link">¤</a></h2>
<pre><code class="language-bash">export IBM_ENTITLEMENT_KEY=xxxxx
export DB2_INSTANCE_NAME=db2u-db01
export DB2_META_STORAGE_CLASS=ibmc-file-gold
export DB2_DATA_STORAGE_CLASS=ibmc-block-gold
export MAS_INSTANCE_ID=inst1
export MAS_CONFIG_DIR=/home/masconfig
ansible-playbook ibm.mas_devops.run_role
</code></pre>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">¤</a></h2>
<p>EPL-2.0</p>
            
          </div>

          <!-- Navigation footer (prev/next) -->
<nav class="md-footer-nav" aria-label="Footer navigation">
  <div class="md-footer-nav__inner">
    <a href="../cp4d_service/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
      <div class="md-footer-nav__direction">
        <svg class="md-footer-nav__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path>
        </svg>
        <span>Previous</span>
      </div>
      <div class="md-footer-nav__title">
        <span class="md-footer-nav__title-text">cp4d_service</span>
      </div>
    </a>
    <a href="../dro/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
      <div class="md-footer-nav__direction">
        <span>Next</span>
        <svg class="md-footer-nav__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path>
        </svg>
      </div>
      <div class="md-footer-nav__title">
        <span class="md-footer-nav__title-text">dro</span>
      </div>
    </a>
  </div>
</nav>
        </article>
      </div>

      <!-- Right sidebar - Table of Contents -->
      <aside class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<nav class="md-sidebar md-sidebar--secondary" aria-label="Table of contents">
  <div class="md-sidebar__scrollwrap">
    <div class="md-sidebar__inner">
      <div class="md-toc">
        <div class="md-toc__title">On this page</div>
        <ul class="md-toc__list">
              <li class="md-toc__item">
                <a href="#role-variables" class="md-toc__link" data-md-level="1">
                  Role Variables
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#installation-variables" class="md-toc__link" data-md-level="2">
                          Installation Variables
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#storage-variables" class="md-toc__link" data-md-level="2">
                          Storage Variables
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#resource-request-variables" class="md-toc__link" data-md-level="2">
                          Resource Request Variables
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#node-label-affinity-variables" class="md-toc__link" data-md-level="2">
                          Node Label Affinity Variables
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#node-taint-toleration-variables" class="md-toc__link" data-md-level="2">
                          Node Taint Toleration Variables
                        </a>
                      </li>
                  </ul>
              </li>
              <li class="md-toc__item">
                <a href="#role-variables-db2ucluster-database-configuration-settings" class="md-toc__link" data-md-level="1">
                  Role Variables - DB2UCluster Database Configuration Settings
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#db2_database_db_config" class="md-toc__link" data-md-level="2">
                          db2_database_db_config
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#db2_instance_dbm_config" class="md-toc__link" data-md-level="2">
                          db2_instance_dbm_config
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#db2_instance_registry" class="md-toc__link" data-md-level="2">
                          db2_instance_registry
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#mpp-system-variables" class="md-toc__link" data-md-level="2">
                          MPP System Variables
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#mas-configuration-variables" class="md-toc__link" data-md-level="2">
                          MAS Configuration Variables
                        </a>
                      </li>
                  </ul>
              </li>
              <li class="md-toc__item">
                <a href="#role-variables-backup-and-restore" class="md-toc__link" data-md-level="1">
                  Role Variables - Backup and Restore
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#masbr_confirm_cluster" class="md-toc__link" data-md-level="2">
                          masbr_confirm_cluster
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#masbr_copy_timeout_sec" class="md-toc__link" data-md-level="2">
                          masbr_copy_timeout_sec
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#masbr_job_timezone" class="md-toc__link" data-md-level="2">
                          masbr_job_timezone
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#masbr_storage_local_folder" class="md-toc__link" data-md-level="2">
                          masbr_storage_local_folder
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#masbr_backup_type" class="md-toc__link" data-md-level="2">
                          masbr_backup_type
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#masbr_backup_from_version" class="md-toc__link" data-md-level="2">
                          masbr_backup_from_version
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#masbr_backup_schedule" class="md-toc__link" data-md-level="2">
                          masbr_backup_schedule
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#masbr_restore_from_version" class="md-toc__link" data-md-level="2">
                          masbr_restore_from_version
                        </a>
                      </li>
                  </ul>
              </li>
              <li class="md-toc__item">
                <a href="#example-playbook" class="md-toc__link" data-md-level="1">
                  Example Playbook
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#install-db2" class="md-toc__link" data-md-level="2">
                          Install Db2
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#backup-db2" class="md-toc__link" data-md-level="2">
                          Backup Db2
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#restore-db2" class="md-toc__link" data-md-level="2">
                          Restore Db2
                        </a>
                      </li>
                  </ul>
              </li>
              <li class="md-toc__item">
                <a href="#run-role-playbook" class="md-toc__link" data-md-level="1">
                  Run Role Playbook
                </a>
              </li>
              <li class="md-toc__item">
                <a href="#license" class="md-toc__link" data-md-level="1">
                  License
                </a>
              </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
      </aside>
    </div>

    <!-- Footer - Full width outside container -->
    <footer class="md-footer">
      Built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/durera/mkdocs-carbon">Carbon theme</a>
    </footer>
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": false, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body></html>