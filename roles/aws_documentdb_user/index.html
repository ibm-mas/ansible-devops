<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>aws_documentdb_user - MAS DevOps Ansible Collection</title>

    <!-- Pure CSS (https://pure-css.github.io/) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/theme.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="../../js/theme.js"></script>

    <!-- Carbon theme zones (white, g10, g90, g100) -->
    <link rel="stylesheet" href="https://1.www.s81c.com/common/carbon/web-components/tag/latest/themes.css">

    <!-- The Carbon web-components/framework -->
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/ui-shell.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/accordion.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/breadcrumb.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/select.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/tabs.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/search.min.js"></script>

    <!-- HighlightJS code formatting support -->
    <link rel="stylesheet" id="hljs-light" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <link rel="stylesheet" id="hljs-dark" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- Required by MkDocs search -->
    <script>var base_url = "../..";</script>

    <!-- User defined extras -->
    
    

    

    
    <script src="../../search/main.js"></script>
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: black; }
        </style></head>

  <body class="md-grid" data-theme-default="g90">
    <!-- Header -->
    <cds-header aria-label="MAS DevOps Ansible Collection" class="md-header">
      <cds-header-menu-button button-label-active="Close menu" button-label-inactive="Open menu"></cds-header-menu-button>
      <cds-header-name href="../.." prefix="IBM">MAS DevOps Ansible Collection</cds-header-name>
      <cds-header-nav menu-bar-label="IBM MAS DevOps Ansible Collection">
          <cds-header-nav-item is-active target="" href="">Ansible</cds-header-nav-item>
          <cds-header-nav-item target="" href="https://ibm-mas.github.io/cli/">CLI</cds-header-nav-item>
      </cds-header-nav>

      <div class="cds--header__global">
<div class="md-theme-toggle" data-theme-default="g90">
  <button class="md-theme-toggle__button" aria-label="Toggle theme" title="Toggle theme">
    <svg class="md-theme-toggle__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"></path>
    </svg>
  </button>
  <div class="md-theme-toggle__menu" hidden>
    <button class="md-theme-toggle__option" data-theme="white">
      <span class="md-theme-toggle__label">Light</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--white"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g10">
      <span class="md-theme-toggle__label">Light Gray</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g10"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g90">
      <span class="md-theme-toggle__label">Dark Gray</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g90"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g100">
      <span class="md-theme-toggle__label">Dark</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g100"></span>
    </button>
  </div>
</div>
        <cds-search id="header-search" label-text="Search" cds-search-input="search-event" expandable></cds-search>
      </div>
      <script>
        var el = document.getElementById("header-search");
        el.addEventListener("cds-search-input", function (ev) {
          console.info(ev.detail.value)
          document.getElementById("header-search-value").setAttribute("value", ev.detail.value);
        });
        el.addEventListener('keydown', function (ev) {
          if (ev.key === 'Enter') {
            location.href="../../search.html?q=" + document.querySelector("#header-search").shadowRoot.querySelector("#input").value;
          }
        });
      </script>

      
    </cds-header>

    <!-- Main container with three-column layout -->
    <div class="md-container">
      <!-- Left sidebar - Navigation -->
      <aside class="md-sidebar md-sidebar--primary" data-md-component="sidebar">
        <div class="md-sidebar__scrollwrap">
          <div class="md-sidebar__inner">
            <cds-side-nav aria-label="Side navigation">
              <cds-side-nav-items>
                
                  
  <cds-side-nav-menu title="General Information">
    
      
  <cds-side-nav-menu-item href="../..">
    Home
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../execution-environment/">
    Ansible Automation Platform
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Playbooks">
    
      
  <cds-side-nav-menu-item href="../../playbooks/ocp/">
    OCP
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/cp4d/">
    Install Cloud Pak For Data
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/aiservice/">
    Install AI Service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-core/">
    Install Core
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-iot/">
    Add IoT
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-manage/">
    Add Manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-monitor/">
    Add Monitor
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-optimizer/">
    Add Optimizer
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-predict/">
    Add Predict
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-visualinspection/">
    Add Visual Inspection
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-facilities/">
    Add Real Estate and Facilities
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-update/">
    Update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-upgrade/">
    Upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/backup-restore/">
    Backup &amp; Restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: OCP Mgmt">
    
      
  <cds-side-nav-menu-item href="../ocp_cluster_monitoring/">
    ocp_cluster_monitoring
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_config/">
    ocp_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_deprovision/">
    ocp_deprovision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_efs/">
    ocp_efs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_github_oauth/">
    ocp_github_oauth
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_login/">
    ocp_login
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_node_config/">
    ocp_node_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_provision/">
    ocp_provision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_roks_upgrade_registry_storage/">
    ocp_roks_upgrade_registry_storage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_upgrade/">
    ocp_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_verify/">
    ocp_verify
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Dependency Mgmt" active expanded>
    
      
  <cds-side-nav-menu-item href="../aws_bucket_access_point/">
    aws_bucket_access_point
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="./" active expanded>
    aws_documentdb_user
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_policy/">
    aws_policy
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_route53/">
    aws_route53
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_user_creation/">
    aws_user_creation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_vpc/">
    aws_vpc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cert_manager/">
    cert_manager
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cis/">
    cis
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../configure_manage_eventstreams/">
    configure_manage_eventstreams
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos/">
    cos
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos_bucket/">
    cos_bucket
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_admin_pwd_update/">
    cp4d_admin_pwd_update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d/">
    cp4d
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_service/">
    cp4d_service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../db2/">
    db2
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../dro/">
    dro
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../eck/">
    eck
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../grafana/">
    grafana
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ibm_catalogs/">
    ibm_catalogs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../kafka/">
    kafka
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../longhorn/">
    longhorn
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../nvidia_gpu/">
    nvidia_gpu
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mongodb/">
    mongodb
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocs/">
    ocs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../sls/">
    sls
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../turbonomic/">
    turbonomic
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Image Mirroring">
    
      
  <cds-side-nav-menu-item href="../mirror_case_prepare/">
    mirror_case_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_extras_prepare/">
    mirror_extras_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_images/">
    mirror_images
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_ocp/">
    mirror_ocp
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_idms/">
    ocp_idms
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_simulate_disconnected_network/">
    ocp_simulate_disconnected_network
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../registry/">
    registry
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Suite Mgmt">
    
      
  <cds-side-nav-menu-item href="../suite_app_config/">
    suite_app_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_install/">
    suite_app_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_uninstall/">
    suite_app_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_upgrade/">
    suite_app_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_rollback/">
    suite_app_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_backup_restore/">
    suite_app_backup_restore
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_certs/">
    suite_certs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_config/">
    suite_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_db2_setup_for_manage/">
    suite_db2_setup_for_manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_dns/">
    suite_dns
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_install/">
    suite_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_attachments_config/">
    suite_manage_attachments_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_birt_report_config/">
    suite_manage_birt_report_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_bim_config/">
    suite_manage_bim_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_customer_files_config/">
    suite_manage_customer_files_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_imagestitching_config/">
    suite_manage_imagestitching_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_import_certs_config/">
    suite_manage_import_certs_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_load_dbc_scripts/">
    suite_manage_load_dbc_scripts
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_logging_config/">
    suite_manage_logging_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_pvc_config/">
    suite_manage_pvc_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_uninstall/">
    suite_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_upgrade/">
    suite_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_rollback/">
    suite_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_verify/">
    suite_verify
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_backup_restore/">
    suite_backup_restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Utilities">
    
      
  <cds-side-nav-menu-item href="../ansible_version_check/">
    ansible_version_check
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../entitlement_key_rotation/">
    entitlement_key_rotation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_jdbc/">
    gencfg_jdbc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_watsonstudio/">
    gencfg_watsonstudio
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_workspace/">
    gencfg_workspace
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_mongo/">
    gencfg_mongo
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
              </cds-side-nav-items>
            </cds-side-nav>
          </div>
        </div>
      </aside>

      <!-- Main content area -->
      <div class="md-content" data-md-component="content">
        <article class="md-content__inner">
          <!-- Breadcrumbs -->
          <div class="md-breadcrumbs"><cds-breadcrumb no-trailing-slash>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="../..">Home</cds-breadcrumb-link>
  </cds-breadcrumb-item>
      <cds-breadcrumb-item>Roles: Dependency Mgmt</cds-breadcrumb-item>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="#aws_documentdb_user">aws_documentdb_user</cds-breadcrumb-link>
  </cds-breadcrumb-item>

  <cds-breadcrumb-item aria-current="page">
    <cds-select id="breadcrumbs-toc" inline placeholder="..." oninput="changeAnchor(this.value)">
    
    
      <cds-select-item value="#role-variables">Role Variables</cds-select-item>
    
    </cds-select>
  </cds-breadcrumb-item>
</cds-breadcrumb>
          </div>

          <!-- Page content -->
          <div class="rst-content">
            
            <h1 id="aws_documentdb_user">aws_documentdb_user<a class="headerlink" href="#aws_documentdb_user" title="Permanent link">¤</a></h1>
<p>Create dedicated database users in AWS DocumentDB for Maximo Application Suite instances. This role automates user creation with appropriate permissions and generates Kubernetes secrets containing the credentials for MAS MongoDB configuration.</p>
<p>AWS DocumentDB is a MongoDB-compatible database service that can serve as the system database for MAS. This role creates instance-specific users with proper authentication credentials.</p>
<p><strong>Prerequisites</strong>:
- MongoDB Shell (mongosh) must be installed
- AWS DocumentDB cluster must be running and accessible
- Master user credentials for DocumentDB must be available</p>
<h2 id="role-variables">Role Variables<a class="headerlink" href="#role-variables" title="Permanent link">¤</a></h2>
<h3 id="mas_instance_id">mas_instance_id<a class="headerlink" href="#mas_instance_id" title="Permanent link">¤</a></h3>
<p>MAS instance identifier for which the DocumentDB user will be created.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>MAS_INSTANCE_ID</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Identifies the MAS instance and is used to generate the DocumentDB username and Kubernetes secret name.</p>
<p><strong>When to use</strong>: Always required. Must match the MAS instance that will use this DocumentDB.</p>
<p><strong>Valid values</strong>: Valid MAS instance ID (typically 3-12 lowercase alphanumeric characters).</p>
<p><strong>Impact</strong>: Used to create username format <code>&lt;instance-id&gt;-docdb-user</code> and secret name <code>docdb-&lt;instance-id&gt;-instance-credentials</code>.</p>
<p><strong>Related variables</strong>: <code>mas_config_dir</code></p>
<p><strong>Notes</strong>:
- Username will be <code>&lt;mas_instance_id&gt;-docdb-user</code>
- Secret name will be <code>docdb-&lt;mas_instance_id&gt;-instance-credentials</code>
- Must match the instance ID used during MAS installation</p>
<h3 id="docdb_host">docdb_host<a class="headerlink" href="#docdb_host" title="Permanent link">¤</a></h3>
<p>AWS DocumentDB cluster endpoint hostname.</p>
<ul>
<li><strong>Required</strong> if <code>docdb_hosts</code> is not set</li>
<li>Environment Variable: <code>DOCDB_HOST</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Specifies the DocumentDB cluster endpoint for single-host connection configuration.</p>
<p><strong>When to use</strong>: Use for simple single-endpoint connections. For replica sets with multiple endpoints, use <code>docdb_hosts</code> instead.</p>
<p><strong>Valid values</strong>: Valid DocumentDB cluster endpoint hostname (e.g., <code>docdb-cluster.abc123.us-east-1.docdb.amazonaws.com</code>).</p>
<p><strong>Impact</strong>: Combined with <code>docdb_port</code> to form the connection string. If <code>docdb_hosts</code> is also set, <code>docdb_hosts</code> takes precedence.</p>
<p><strong>Related variables</strong>: <code>docdb_port</code>, <code>docdb_hosts</code></p>
<p><strong>Notes</strong>:
- Use cluster endpoint for automatic failover
- Instance endpoints can also be used but don't provide automatic failover
- <code>docdb_hosts</code> takes precedence if both are set
- Obtain from AWS DocumentDB console or CLI</p>
<h3 id="docdb_port">docdb_port<a class="headerlink" href="#docdb_port" title="Permanent link">¤</a></h3>
<p>AWS DocumentDB connection port.</p>
<ul>
<li><strong>Required</strong> if <code>docdb_hosts</code> is not set</li>
<li>Environment Variable: <code>DOCDB_PORT</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Specifies the port number for DocumentDB connections.</p>
<p><strong>When to use</strong>: Required when using <code>docdb_host</code>. Not needed if using <code>docdb_hosts</code> (port included in hosts string).</p>
<p><strong>Valid values</strong>: Valid port number, typically <code>27017</code> (default MongoDB port).</p>
<p><strong>Impact</strong>: Combined with <code>docdb_host</code> to form the connection string.</p>
<p><strong>Related variables</strong>: <code>docdb_host</code>, <code>docdb_hosts</code></p>
<p><strong>Notes</strong>:
- Default DocumentDB port is <code>27017</code>
- Must match the port configured in DocumentDB cluster
- Not used if <code>docdb_hosts</code> is set</p>
<h3 id="docdb_hosts">docdb_hosts<a class="headerlink" href="#docdb_hosts" title="Permanent link">¤</a></h3>
<p>AWS DocumentDB connection string with multiple hosts and ports.</p>
<ul>
<li><strong>Required</strong> if both <code>docdb_host</code> and <code>docdb_port</code> are not set</li>
<li>Environment Variable: <code>DOCDB_HOSTS</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Provides a complete connection string with multiple DocumentDB endpoints for replica set configurations.</p>
<p><strong>When to use</strong>: Use for replica set deployments with multiple endpoints. Takes precedence over <code>docdb_host</code> and <code>docdb_port</code> if all are set.</p>
<p><strong>Valid values</strong>: Comma-separated list of <code>host:port</code> pairs (e.g., <code>docdb-1.abc.us-east-1.docdb.amazonaws.com:27017,docdb-2.abc.us-east-1.docdb.amazonaws.com:27017,docdb-3.abc.us-east-1.docdb.amazonaws.com:27017</code>).</p>
<p><strong>Impact</strong>: Enables connection to multiple DocumentDB instances for high availability and automatic failover.</p>
<p><strong>Related variables</strong>: <code>docdb_host</code>, <code>docdb_port</code></p>
<p><strong>Notes</strong>:
- <strong>Recommended</strong> for production deployments
- Takes precedence over <code>docdb_host</code> and <code>docdb_port</code>
- Include all replica set members for best availability
- Format: <code>host1:port1,host2:port2,host3:port3</code>
- Obtain from AWS DocumentDB cluster details</p>
<h3 id="docdb_master_username">docdb_master_username<a class="headerlink" href="#docdb_master_username" title="Permanent link">¤</a></h3>
<p>AWS DocumentDB master username for administrative access.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>DOCDB_MASTER_USERNAME</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Provides the master user credentials to create the MAS-specific database user.</p>
<p><strong>When to use</strong>: Always required. Must be the master username configured during DocumentDB cluster creation.</p>
<p><strong>Valid values</strong>: Valid DocumentDB master username.</p>
<p><strong>Impact</strong>: Used to authenticate to DocumentDB and create the new MAS user. Must have permissions to create users and grant roles.</p>
<p><strong>Related variables</strong>: <code>docdb_master_password</code></p>
<p><strong>Notes</strong>:
- This is the master user created with the DocumentDB cluster
- Credentials are only used during user creation, not stored permanently
- Ensure master user has <code>userAdmin</code> or equivalent permissions
- Obtain from AWS Secrets Manager or secure credential store</p>
<h3 id="docdb_master_password">docdb_master_password<a class="headerlink" href="#docdb_master_password" title="Permanent link">¤</a></h3>
<p>AWS DocumentDB master password for administrative access.</p>
<ul>
<li><strong>Required</strong></li>
<li>Environment Variable: <code>DOCDB_MASTER_PASSWORD</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Provides the master user password to authenticate and create the MAS-specific database user.</p>
<p><strong>When to use</strong>: Always required. Must be the master password configured during DocumentDB cluster creation.</p>
<p><strong>Valid values</strong>: Valid DocumentDB master password string.</p>
<p><strong>Impact</strong>: Used to authenticate to DocumentDB and create the new MAS user.</p>
<p><strong>Related variables</strong>: <code>docdb_master_username</code></p>
<p><strong>Notes</strong>:
- Store securely and never commit to version control
- Credentials are only used during user creation
- Consider using AWS Secrets Manager for credential management
- Rotate master password regularly per security best practices</p>
<h3 id="docdb_instance_password">docdb_instance_password<a class="headerlink" href="#docdb_instance_password" title="Permanent link">¤</a></h3>
<p>Password for the MAS-specific DocumentDB user being created.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>DOCDB_INSTANCE_PASSWORD</code></li>
<li>Default: Auto-generated if not provided</li>
</ul>
<p><strong>Purpose</strong>: Specifies the password for the new MAS DocumentDB user. If not provided, a secure password is automatically generated.</p>
<p><strong>When to use</strong>: Provide if you need a specific password. Otherwise, let the role generate a secure random password.</p>
<p><strong>Valid values</strong>: Strong password string meeting DocumentDB password requirements.</p>
<p><strong>Impact</strong>: This password will be stored in the Kubernetes secret and used by MAS to connect to DocumentDB.</p>
<p><strong>Related variables</strong>: <code>mas_instance_id</code>, <code>mas_config_dir</code></p>
<p><strong>Notes</strong>:
- Auto-generation is recommended for security
- If provided, ensure it meets complexity requirements
- Password is stored in Kubernetes secret <code>docdb-&lt;instance-id&gt;-instance-credentials</code>
- Keep password secure and rotate regularly</p>
<h3 id="user_action">user_action<a class="headerlink" href="#user_action" title="Permanent link">¤</a></h3>
<p>Action to perform on the DocumentDB user.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>USER_ACTION</code></li>
<li>Default: <code>add</code></li>
</ul>
<p><strong>Purpose</strong>: Controls whether to create or remove the DocumentDB user.</p>
<p><strong>When to use</strong>: Set to <code>add</code> to create user (default), or <code>remove</code> to delete the user.</p>
<p><strong>Valid values</strong>:
- <code>add</code> - Create the DocumentDB user (default)
- <code>remove</code> - Delete the DocumentDB user</p>
<p><strong>Impact</strong>: Determines whether the role creates or removes the user from DocumentDB.</p>
<p><strong>Related variables</strong>: <code>mas_instance_id</code></p>
<p><strong>Notes</strong>:
- Default <code>add</code> is for normal user creation
- Use <code>remove</code> when decommissioning a MAS instance
- Removing user does not delete the Kubernetes secret
- Verify user removal: <code>mongosh</code> to DocumentDB and check users</p>
<h3 id="mas_config_dir">mas_config_dir<a class="headerlink" href="#mas_config_dir" title="Permanent link">¤</a></h3>
<p>Local directory where the generated Kubernetes secret YAML will be saved.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>MAS_CONFIG_DIR</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Specifies the output directory for the generated Kubernetes secret containing DocumentDB credentials.</p>
<p><strong>When to use</strong>: Set when you want to save the generated secret YAML for later application or documentation.</p>
<p><strong>Valid values</strong>: Valid directory path where the Ansible controller has write permissions.</p>
<p><strong>Impact</strong>: If set, a YAML file with the DocumentDB credentials secret will be created in this directory.</p>
<p><strong>Related variables</strong>: <code>mas_instance_id</code></p>
<p><strong>Notes</strong>:
- Secret filename: <code>docdb-&lt;instance-id&gt;-instance-credentials.yaml</code>
- Can be applied with: <code>oc apply -f &lt;file&gt;</code>
- Keep generated files secure as they contain credentials
- Useful for GitOps workflows or manual secret management</p>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    mas_instance_id: masinst1
    docdb_master_username: test-user
    docdb_master_password: test-pass-***
    docdb_host: test1.aws-01....
    docdb_port: 27017

  roles:
    - ibm.mas_devops.aws_documentdb_user
</code></pre>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    mas_instance_id: masinst1
    docdb_master_username: test-user
    docdb_master_password: test-pass-***
    docdb_hosts: test1.aws-01:27017,test1.aws-02:27017,test1.aws-03:27017

  roles:
    - ibm.mas_devops.aws_documentdb_user
</code></pre>
            
          </div>

          <!-- Navigation footer (prev/next) -->
<nav class="md-footer-nav" aria-label="Footer navigation">
  <div class="md-footer-nav__inner">
    <a href="../aws_bucket_access_point/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
      <div class="md-footer-nav__direction">
        <svg class="md-footer-nav__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path>
        </svg>
        <span>Previous</span>
      </div>
      <div class="md-footer-nav__title">
        <span class="md-footer-nav__title-text">aws_bucket_access_point</span>
      </div>
    </a>
    <a href="../aws_policy/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
      <div class="md-footer-nav__direction">
        <span>Next</span>
        <svg class="md-footer-nav__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path>
        </svg>
      </div>
      <div class="md-footer-nav__title">
        <span class="md-footer-nav__title-text">aws_policy</span>
      </div>
    </a>
  </div>
</nav>
        </article>
      </div>

      <!-- Right sidebar - Table of Contents -->
      <aside class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<nav class="md-sidebar md-sidebar--secondary" aria-label="Table of contents">
  <div class="md-sidebar__scrollwrap">
    <div class="md-sidebar__inner">
      <div class="md-toc">
        <div class="md-toc__title">On this page</div>
        <ul class="md-toc__list">
              <li class="md-toc__item">
                <a href="#role-variables" class="md-toc__link" data-md-level="1">
                  Role Variables
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#mas_instance_id" class="md-toc__link" data-md-level="2">
                          mas_instance_id
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#docdb_host" class="md-toc__link" data-md-level="2">
                          docdb_host
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#docdb_port" class="md-toc__link" data-md-level="2">
                          docdb_port
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#docdb_hosts" class="md-toc__link" data-md-level="2">
                          docdb_hosts
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#docdb_master_username" class="md-toc__link" data-md-level="2">
                          docdb_master_username
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#docdb_master_password" class="md-toc__link" data-md-level="2">
                          docdb_master_password
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#docdb_instance_password" class="md-toc__link" data-md-level="2">
                          docdb_instance_password
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#user_action" class="md-toc__link" data-md-level="2">
                          user_action
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#mas_config_dir" class="md-toc__link" data-md-level="2">
                          mas_config_dir
                        </a>
                      </li>
                  </ul>
              </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
      </aside>
    </div>

    <!-- Footer - Full width outside container -->
    <footer class="md-footer">
      Built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/durera/mkdocs-carbon">Carbon theme</a>
    </footer>
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": false, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body></html>