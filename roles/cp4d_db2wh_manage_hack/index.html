<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://ibm-mas.github.io/ansible-devops/roles/cp4d_db2wh_manage_hack/" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>cp4d_db2wh_manage_hack - MAS Devops Collection</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
        <link href="../../extra.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "cp4d_db2wh_manage_hack";
        var mkdocs_page_input_path = "roles/cp4d_db2wh_manage_hack.md";
        var mkdocs_page_url = "/ansible-devops/roles/cp4d_db2wh_manage_hack/";
      </script>
    
    <script src="../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/languages/yaml.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> MAS Devops Collection
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">Full Stack Playbooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/fullstack-roks/">IBM Cloud</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Lite Playbooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/lite-core-roks/">Core only on IBM Cloud</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/lite-core-quickburn/">Core only on QuickBurn</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/lite-manage-roks/">Manage on IBM Cloud</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Other Playbooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/ocp/">OCP Playbooks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/dependencies/">Dependencies Playbooks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/cp4d/">CP4D Playbooks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../playbooks/mas/">MAS Playbooks</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">Roles</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../amqstreams/">amqstreams</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ansible_version_check/">ansible_version_check</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../appconnect_install/">appconnect_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cos_setup/">cos_setup</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_db2wh/">cp4d_db2wh</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_db2wh_backup/">cp4d_db2wh_backup</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="./">cp4d_db2wh_manage_hack</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#role-variables">Role Variables</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#cpd_version">cpd_version</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#db2wh_instancename">db2wh_instancename</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#db2wh_username">db2wh_username</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#db2wh_dbname">db2wh_dbname</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#db2wh_schema">db2wh_schema</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#example-playbook">Example Playbook</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#license">License</a>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_db2wh_restore/">cp4d_db2wh_restore</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_hack_worker_nodes/">cp4d_hack_worker_nodes</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_install/">cp4d_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cp4d_install_services/">cp4d_install_services</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../db2u/">db2u</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_sls/">gencfg_sls</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_jdbc/">gencfg_jdbc</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gencfg_workspace/">gencfg_workspace</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../gpu_install/">gpu_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../install_operator/">install_operator</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../mongodb/">mongodb</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_deprovision/">ocp_deprovision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_login/">ocp_login</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_provision/">ocp_provision</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_setup_github_oauth/">ocp_setup_github_oauth</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_setup_mas_deps/">ocp_setup_mas_deps</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_setup_ocs/">ocp_setup_ocs</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../ocp_verify/">ocp_verify</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../sls_install/">sls_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_configure/">suite_app_configure</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_app_install/">suite_app_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_config/">suite_config</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_dns/">suite_dns</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_install/">suite_install</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_mustgather/">suite_mustgather</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_mustgather_download/">suite_mustgather_download</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../suite_verify/">suite_verify</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../uds_install/">uds_install</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">MAS Devops Collection</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
          <li>Roles &raquo;</li><li>cp4d_db2wh_manage_hack</li>
    <li class="wy-breadcrumbs-aside">
        <a href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/roles/cp4d_db2wh_manage_hack.md"
          class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>

          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="cp4d_db2wh_manage_hack">cp4d_db2wh_manage_hack<a class="headerlink" href="#cp4d_db2wh_manage_hack" title="Permanent link"></a></h1>
<p>This role shouldn't need to exist, it should be part of the Manage operator, but is not so we have to do it as a seperate step in the install flow for now.  The role will perform some initial setup on the Db2 instance that is needed to prepare it for use with the Manage application and supports both CP4D version 3.5 and 4.0.</p>
<p>The role will copy a bash script (setupdb.sh) into the Db2 pod and execute it inside the container, this script will perform a number of configuration changes to the database as well as configuring the tablespaces for Maximo Manage because the operator is not yet able to do this itself.</p>
<h2 id="role-variables">Role Variables<a class="headerlink" href="#role-variables" title="Permanent link"></a></h2>
<h3 id="cpd_version">cpd_version<a class="headerlink" href="#cpd_version" title="Permanent link"></a></h3>
<p>Users may <strong>optionally</strong> pass this parameter to explicitly control the version of CP4D used, if this is not done then the role will attempt to locate the <code>cpd-meta-ops</code> namespace associated with CP4D v3.5, if this namespace if located then we will switch to CP4D v3.5 mode, in all other cases the role will assume CP4D v4 is in use.</p>
<ul>
<li>Environment Variable: <code>CPD_VERSION</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="db2wh_instancename">db2wh_instancename<a class="headerlink" href="#db2wh_instancename" title="Permanent link"></a></h3>
<p>Required.  The name of the db2 instance to execute the hack in.  We will use this to derive the instance ID.  Note that for CP4D v3.5 instances we are only able to support those created by the <a href="../cp4d_db2wh/">cp4d_db2wh</a> role; custom metadata is created by that role which is required by this role to dervice the instance ID from a named database instance.</p>
<ul>
<li>Environment Variable: <code>DB2WH_INSTANCE_NAME</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="db2wh_username">db2wh_username<a class="headerlink" href="#db2wh_username" title="Permanent link"></a></h3>
<p>The username that will be used to connect to the database specified by <code>db2wh_dbname</code>.</p>
<ul>
<li>Environment Variable: None</li>
<li>Default Value: <code>db2inst1</code></li>
</ul>
<h3 id="db2wh_dbname">db2wh_dbname<a class="headerlink" href="#db2wh_dbname" title="Permanent link"></a></h3>
<p>The name of the database in the instance to connect to when executing the hack script.</p>
<ul>
<li>Environment Variable: None</li>
<li>Default Value: <code>BLUDB</code></li>
</ul>
<h3 id="db2wh_schema">db2wh_schema<a class="headerlink" href="#db2wh_schema" title="Permanent link"></a></h3>
<p>The name of the Manage schema where the hack should be targeted in.</p>
<ul>
<li>Environment Variable: None</li>
<li>Default Value: <code>maximo</code></li>
</ul>
<h2 id="example-playbook">Example Playbook<a class="headerlink" href="#example-playbook" title="Permanent link"></a></h2>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    db2wh_instancename: mydb2
  roles:
    - ibm.mas_devops.cp4d_db2wh_manage_hack
</code></pre>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link"></a></h2>
<p>EPL-2.0</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/ibm-mas/ansible-devops" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../cp4d_db2wh_backup/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../cp4d_db2wh_restore/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
