<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>kafka - MAS DevOps Ansible Collection</title>

    <!-- Pure CSS (https://pure-css.github.io/) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/theme.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="../../js/theme.js"></script>

    <!-- Carbon theme zones (white, g10, g90, g100) -->
    <link rel="stylesheet" href="https://1.www.s81c.com/common/carbon/web-components/tag/latest/themes.css" />

    <!-- The Carbon web-components/framework -->
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/ui-shell.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/accordion.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/breadcrumb.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/select.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/tabs.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/search.min.js"></script>

    <!-- HighlightJS code formatting support -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- Required by MkDocs search -->
    <script>var base_url = "../..";</script>

    <!-- User defined extras -->
    
    

    

    
    <script src="../../search/main.js"></script>
    
   <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: black; }</style> <script src="../../assets/javascripts/glightbox.min.js"></script></head>

  <body>
    <cds-header aria-label="MAS DevOps Ansible Collection" class="cds-theme-zone-g100">
      <cds-header-menu-button button-label-active="Close menu" button-label-inactive="Open menu"></cds-header-menu-button>
      <cds-header-name href="../.." prefix="IBM">MAS DevOps Ansible Collection</cds-header-name>
      <cds-header-nav menu-bar-label="IBM MAS DevOps Ansible Collection">
          <cds-header-nav-item is-active target="" href="">Ansible</cds-header-nav-item>
          <cds-header-nav-item  target="" href="https://ibm-mas.github.io/cli/">CLI</cds-header-nav-item>
      </cds-header-nav>

      <div class="cds--header__global">
        <cds-search id="header-search" label-text="Search" cds-search-input="search-event" expandable></cds-search>
      </div>
      <script>
        var el = document.getElementById("header-search");
        el.addEventListener("cds-search-input", function (ev) {
          console.info(ev.detail.value)
          document.getElementById("header-search-value").setAttribute("value", ev.detail.value);
        });
        el.addEventListener('keydown', function (ev) {
          if (ev.key === 'Enter') {
            location.href="../../search.html?q=" + document.querySelector("#header-search").shadowRoot.querySelector("#input").value;
          }
        });
      </script>

      
        <cds-header-nav>
          <cds-header-nav-item href="https://github.com/ibm-mas/ansible-devops/blob/master/docs/roles/kafka.md">Edit on GitHub</cds-header-nav-item>
        </cds-header-nav>
      

    </cds-header>

    <cds-side-nav aria-label="Side navigation" class="cds-theme-zone-g90">
      <cds-side-nav-items>
        
          
  <cds-side-nav-menu title="General Information" >
    
      
  <cds-side-nav-menu-item href="../.." >
    Home
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../execution-environment/" >
    Ansible Automation Platform
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Playbooks" >
    
      
  <cds-side-nav-menu-item href="../../playbooks/ocp/" >
    OCP
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/cp4d/" >
    Install Cloud Pak For Data
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/aiservice/" >
    Install AI Service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-core/" >
    Install Core
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-iot/" >
    Add IoT
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-manage/" >
    Add Manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-monitor/" >
    Add Monitor
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-optimizer/" >
    Add Optimizer
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-predict/" >
    Add Predict
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-visualinspection/" >
    Add Visual Inspection
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-facilities/" >
    Add Real Estate and Facilities
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-update/" >
    Update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-upgrade/" >
    Upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/backup-restore/" >
    Backup & Restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: OCP Mgmt" >
    
      
  <cds-side-nav-menu-item href="../ocp_cluster_monitoring/" >
    ocp_cluster_monitoring
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_config/" >
    ocp_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_deprovision/" >
    ocp_deprovision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_efs/" >
    ocp_efs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_github_oauth/" >
    ocp_github_oauth
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_login/" >
    ocp_login
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_node_config/" >
    ocp_node_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_provision/" >
    ocp_provision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_roks_upgrade_registry_storage/" >
    ocp_roks_upgrade_registry_storage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_upgrade/" >
    ocp_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_verify/" >
    ocp_verify
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Dependency Mgmt" active expanded>
    
      
  <cds-side-nav-menu-item href="../appconnect/" >
    appconnect
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_bucket_access_point/" >
    aws_bucket_access_point
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_documentdb_user/" >
    aws_documentdb_user
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_policy/" >
    aws_policy
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_route53/" >
    aws_route53
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_user_creation/" >
    aws_user_creation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_vpc/" >
    aws_vpc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cert_manager/" >
    cert_manager
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cis/" >
    cis
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../common_services/" >
    common-services
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../configure_manage_eventstreams/" >
    configure_manage_eventstreams
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos/" >
    cos
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos_bucket/" >
    cos_bucket
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_admin_pwd_update/" >
    cp4d_admin_pwd_update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d/" >
    cp4d
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_service/" >
    cp4d_service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../db2/" >
    db2
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../dro/" >
    dro
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../eck/" >
    eck
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../grafana/" >
    grafana
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ibm_catalogs/" >
    ibm_catalogs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="./" active expanded>
    kafka
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../nvidia_gpu/" >
    nvidia_gpu
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mongodb/" >
    mongodb
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocs/" >
    ocs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../sls/" >
    sls
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../turbonomic/" >
    turbonomic
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../uds/" >
    uds
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Image Mirroring" >
    
      
  <cds-side-nav-menu-item href="../mirror_case_prepare/" >
    mirror_case_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_extras_prepare/" >
    mirror_extras_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_images/" >
    mirror_images
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_ocp/" >
    mirror_ocp
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_idms/" >
    ocp_idms
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_simulate_disconnected_network/" >
    ocp_simulate_disconnected_network
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../registry/" >
    registry
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Suite Mgmt" >
    
      
  <cds-side-nav-menu-item href="../suite_app_config/" >
    suite_app_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_install/" >
    suite_app_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_uninstall/" >
    suite_app_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_upgrade/" >
    suite_app_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_rollback/" >
    suite_app_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_backup_restore/" >
    suite_app_backup_restore
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_certs/" >
    suite_certs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_config/" >
    suite_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_db2_setup_for_manage/" >
    suite_db2_setup_for_manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_dns/" >
    suite_dns
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_install/" >
    suite_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_attachments_config/" >
    suite_manage_attachments_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_birt_report_config/" >
    suite_manage_birt_report_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_bim_config/" >
    suite_manage_bim_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_customer_files_config/" >
    suite_manage_customer_files_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_imagestitching_config/" >
    suite_manage_imagestitching_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_import_certs_config/" >
    suite_manage_import_certs_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_load_dbc_scripts/" >
    suite_manage_load_dbc_scripts
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_logging_config/" >
    suite_manage_logging_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_pvc_config/" >
    suite_manage_pvc_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_uninstall/" >
    suite_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_upgrade/" >
    suite_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_rollback/" >
    suite_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_verify/" >
    suite_verify
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_backup_restore/" >
    suite_backup_restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
          
  <cds-side-nav-menu title="Roles: Utilities" >
    
      
  <cds-side-nav-menu-item href="../ansible_version_check/" >
    ansible_version_check
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../entitlement_key_rotation/" >
    entitlement_key_rotation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_jdbc/" >
    gencfg_jdbc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_watsonstudio/" >
    gencfg_watsonstudio
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_workspace/" >
    gencfg_workspace
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_mongo/" >
    gencfg_mongo
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

        
      </cds-side-nav-items>
    </cds-side-nav>

    <div id="breadcrumbs" class="rst-content"><cds-breadcrumb no-trailing-slash>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="../..">Home</cds-breadcrumb-link>
  </cds-breadcrumb-item>
      <cds-breadcrumb-item>Roles: Dependency Mgmt</cds-breadcrumb-item>

  <cds-breadcrumb-item aria-current="page">
    <cds-breadcrumb-link href="#kafka">kafka</cds-breadcrumb-link>
  </cds-breadcrumb-item>

  <cds-breadcrumb-item>
    <cds-select id="breadcrumbs-toc" class="cds-theme-zone-g10" inline placeholder="..." oninput="changeAnchor(this.value)">
    
    
      <cds-select-item value="#role-variables">Role Variables</cds-select-item>
    
      <cds-select-item value="#red-hat-amq-streams-strimzi-role-variables">Red Hat AMQ Streams &amp; Strimzi Role Variables</cds-select-item>
    
      <cds-select-item value="#ibm-cloud-evenstreams-role-variables">IBM Cloud Evenstreams Role Variables</cds-select-item>
    
      <cds-select-item value="#example-playbook">Example Playbook</cds-select-item>
    
      <cds-select-item value="#aws-msk-role-variables">AWS MSK Role Variables</cds-select-item>
    
      <cds-select-item value="#prerequisites">Prerequisites</cds-select-item>
    
      <cds-select-item value="#example-playbook-to-install-aws-msk">Example Playbook to install AWS MSK</cds-select-item>
    
      <cds-select-item value="#example-playbook-to-uninstall-aws-msk">Example Playbook to uninstall AWS MSK</cds-select-item>
    
      <cds-select-item value="#license">License</cds-select-item>
    
  </cds-select>
  </cds-breadcrumb-item>
</cds-breadcrumb>
    </div>

    <div id="main-content" class="rst-content">
      
      <h1 id="kafka">kafka<a class="headerlink" href="#kafka" title="Permanent link">¤</a></h1>
<p>This role provides support to install a Kafka Cluster using <a href="https://strimzi.io/">Strimzi</a>, <a href="https://www.redhat.com/en/resources/amq-streams-datasheet">Red Hat AMQ Streams</a>, <a href="https://www.ibm.com/cloud/event-streams">IBM Event Streams</a> or <a href="https://aws.amazon.com/msk/">AWS MSK</a> and generate configuration that can be directly applied to Maximo Application Suite.</p>
<blockquote>
<p>Both Strimzi and Red Hat AMQ streams component are massively scalable, distributed, and high-performance data streaming platform based on the Apache Kafka project. Both offer a distributed backbone that allows microservices and other applications to share data with high throughput and low latency.</p>
<p>As more applications move to Kubernetes and Red Hat OpenShift, it is increasingly important to be able to run the communication infrastructure on the same platform. Red Hat OpenShift, as a highly scalable platform, is a natural fit for messaging technologies such as Kafka. The AMQ streams component makes running and managing Apache Kafka OpenShift native through the use of powerful operators that simplify the deployment, configuration, management, and use of Apache Kafka on Red Hat OpenShift.</p>
<p>The AMQ streams component is part of the Red Hat AMQ family, which also includes the AMQ broker, a longtime innovation leader in Java™ Message Service (JMS) and polyglot messaging, as well as the AMQ interconnect router, a wide-area, peer-to-peer messaging solution. Under the covers, AMQ streams leverages Strimzi's architecture, resources and configurations.</p>
</blockquote>
<p><strong>Note:</strong> The MAS license does not include entitlement for AMQ streams. The MAS Devops Collection supports this Kafka deployment as an example only. Therefore, we recommend the use of Strimzi for an opensource Kafka provider.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The role will generate a yaml file containing the definition of a Secret and KafkaCfg resource that can be used to configure the deployed cluster as the MAS system Kafka.</p>
<p>This file can be directly applied using <code>oc apply -f $MAS_CONFIG_DIR/kafkacfg-amqstreams-system.yaml</code> or used in conjunction with the <a href="../suite_config/">suite_config</a> role.</p>
</div>
<h2 id="role-variables">Role Variables<a class="headerlink" href="#role-variables" title="Permanent link">¤</a></h2>
<h3 id="kafka_action">kafka_action<a class="headerlink" href="#kafka_action" title="Permanent link">¤</a></h3>
<p>Action to be performed by Kafka role. Valid values are <code>install</code>, <code>upgrade</code> or <code>uninstall</code>.  The <code>upgrade</code> action applies only to the <code>strimzi</code> and <code>redhat</code> providers.</p>
<ul>
<li>Environment Variable: <code>KAFKA_ACTION</code></li>
<li>Default Value: <code>install</code></li>
</ul>
<h3 id="kafka_provider">kafka_provider<a class="headerlink" href="#kafka_provider" title="Permanent link">¤</a></h3>
<p>Valid kafka providers are <code>strimzi</code> (opensource), <code>redhat</code> (installs AMQ Streams which requires a license that is not included with MAS entitlement), <code>ibm</code> (provisions a paid Event Streams instance in the target IBM Cloud account) and <code>aws</code> (provisions a paid MSK instance in the target AWS account).</p>
<ul>
<li>Environment Variable: <code>KAFKA_PROVIDER</code></li>
<li>Default Value: <code>strimzi</code></li>
</ul>
<h2 id="red-hat-amq-streams-strimzi-role-variables">Red Hat AMQ Streams &amp; Strimzi Role Variables<a class="headerlink" href="#red-hat-amq-streams-strimzi-role-variables" title="Permanent link">¤</a></h2>
<h3 id="kafka_version">kafka_version<a class="headerlink" href="#kafka_version" title="Permanent link">¤</a></h3>
<p>The version of Kafka to deploy by the operator. Before changing the kafka_version make the version is supported
by the <a href="https://access.redhat.com/documentation/en-us/red_hat_amq_streams">amq-streams operator version</a> or <a href="https://strimzi.io/downloads/">strimzi operator version</a>.</p>
<ul>
<li>Environment Variable: <code>KAFKA_VERSION</code></li>
<li>Default Value: <code>3.8.0</code> for AMQ Streams and <code>3.9.0</code> for Strimzi.</li>
</ul>
<h3 id="kafka_namespace">kafka_namespace<a class="headerlink" href="#kafka_namespace" title="Permanent link">¤</a></h3>
<p>The namespace where the operator and Kafka cluster will be deployed.</p>
<ul>
<li>Environment Variable: <code>KAFKA_NAMESPACE</code></li>
<li>Default Value: <code>amq-streams</code> for AMQ Streams and <code>strimzi</code> for Strimzi.</li>
</ul>
<h3 id="kafka_cluster_name">kafka_cluster_name<a class="headerlink" href="#kafka_cluster_name" title="Permanent link">¤</a></h3>
<p>The name of the Kafka cluster that will be created</p>
<ul>
<li>Environment Variable: <code>KAFKA_CLUSTER_NAME</code></li>
<li>Default Value: <code>maskafka</code></li>
</ul>
<h3 id="kafka_cluster_size">kafka_cluster_size<a class="headerlink" href="#kafka_cluster_size" title="Permanent link">¤</a></h3>
<p>The configuration to apply, there are two configurations available: small and large.</p>
<ul>
<li>Environment Variable: <code>KAFKA_CLUSTER_SIZE</code></li>
<li>Default Value: <code>small</code></li>
</ul>
<h3 id="kafka_storage_class">kafka_storage_class<a class="headerlink" href="#kafka_storage_class" title="Permanent link">¤</a></h3>
<p>The name of the storage class to configure the AMQStreams operator to use for persistent storage in the Kafka cluster. Storage class must support ReadWriteOnce(RWO) access mode.</p>
<ul>
<li>Environment Variable: <code>KAFKA_STORAGE_CLASS</code></li>
<li>Default Value: lookup supported storage classes in the cluster</li>
</ul>
<h3 id="kafka_storage_size">kafka_storage_size<a class="headerlink" href="#kafka_storage_size" title="Permanent link">¤</a></h3>
<p>The size of the storage to configure the AMQStreams operator to use for persistent storage in the Kafka cluster.</p>
<ul>
<li>Environment Variable: <code>KAFKA_STORAGE_SIZE</code></li>
<li>Default Value: <code>100Gi</code></li>
</ul>
<h3 id="zookeeper_storage_class">zookeeper_storage_class<a class="headerlink" href="#zookeeper_storage_class" title="Permanent link">¤</a></h3>
<p>The name of the storage class to configure the AMQStreams operator to use for persistent storage in the Zookeeper cluster. Storage class must support ReadWriteOnce(RWO) access mode.</p>
<ul>
<li>Environment Variable: <code>ZOOKEEPER_STORAGE_CLASS</code></li>
<li>Default Value: lookup supported storage classes in the cluster</li>
</ul>
<h3 id="zookeeper_storage_size">zookeeper_storage_size<a class="headerlink" href="#zookeeper_storage_size" title="Permanent link">¤</a></h3>
<p>The size of the storage to configure the AMQStreams operator to use for persistent storage in the Zookeeper cluster.</p>
<ul>
<li>Environment Variable: <code>ZOOKEEPER_STORAGE_SIZE</code></li>
<li>Default Value: <code>10Gi</code></li>
</ul>
<h3 id="kafka_user_name">kafka_user_name<a class="headerlink" href="#kafka_user_name" title="Permanent link">¤</a></h3>
<p>The name of the user to setup in the cluster for MAS.</p>
<ul>
<li>Environment Variable: <code>KAFKA_USER_NAME</code></li>
<li>Default Value: <code>masuser</code></li>
</ul>
<h3 id="kafka_user_password-supported-in-strimzi-operator-verion-0250-amq-streams-operator-version-2x">kafka_user_password (supported in Strimzi operator verion <a href="https://github.com/strimzi/strimzi-kafka-operator/blob/main/CHANGELOG.md#0250">0.25.0</a> - amq streams operator version 2.x)<a class="headerlink" href="#kafka_user_password-supported-in-strimzi-operator-verion-0250-amq-streams-operator-version-2x" title="Permanent link">¤</a></h3>
<p>The password of the user to setup in the cluster for MAS.</p>
<ul>
<li>Environment Variable: <code>KAFKA_USER_PASSWORD</code></li>
<li>Default Value: a randomly generated password is used if one is not specified</li>
</ul>
<h3 id="mas_instance_id">mas_instance_id<a class="headerlink" href="#mas_instance_id" title="Permanent link">¤</a></h3>
<p>The instance ID of Maximo Application Suite that the KafkaCfg configuration will target.  If this or <code>mas_config_dir</code> are not set then the role will not generate a KafkaCfg template.</p>
<ul>
<li>Environment Variable: <code>MAS_INSTANCE_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="mas_config_dir">mas_config_dir<a class="headerlink" href="#mas_config_dir" title="Permanent link">¤</a></h3>
<p>Local directory to save the generated KafkaCfg resource definition.  This can be used to manually configure a MAS instance to connect to the Kafka cluster, or used as an input to the <a href="../suite_config/">suite_config</a> role. If this or <code>mas_instance_id</code> are not set then the role will not generate a KafkaCfg template.</p>
<ul>
<li>Environment Variable: <code>MAS_CONFIG_DIR</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="custom_labels">custom_labels<a class="headerlink" href="#custom_labels" title="Permanent link">¤</a></h3>
<p>List of comma separated key=value pairs for setting custom labels on instance specific resources.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CUSTOM_LABELS</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="ibm-cloud-evenstreams-role-variables">IBM Cloud Evenstreams Role Variables<a class="headerlink" href="#ibm-cloud-evenstreams-role-variables" title="Permanent link">¤</a></h2>
<h3 id="ibmcloud_apikey">ibmcloud_apikey<a class="headerlink" href="#ibmcloud_apikey" title="Permanent link">¤</a></h3>
<p>Defines IBM Cloud API Key. This API Key needs to have access to manage (provision/deprovision) IBM Cloud Event Streams.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>IBMCLOUD_APIKEY</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="eventstreams_resourcegroup">eventstreams_resourcegroup<a class="headerlink" href="#eventstreams_resourcegroup" title="Permanent link">¤</a></h3>
<p>Defines the IBM Cloud Resource Group to target the Event Streams instance.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>EVENTSTREAMS_RESOURCEGROUP</code></li>
<li>Default Value: <code>Default</code> or value defined by <code>IBMCLOUD_RESOURCEGROUP</code></li>
</ul>
<h3 id="eventstreams_name">eventstreams_name<a class="headerlink" href="#eventstreams_name" title="Permanent link">¤</a></h3>
<p>Event Streams instance name.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>EVENTSTREAMS_NAME</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="eventstreams_plan">eventstreams_plan<a class="headerlink" href="#eventstreams_plan" title="Permanent link">¤</a></h3>
<p>Event Streams instance plan.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>EVENTSTREAMS_PLAN</code></li>
<li>Default Value: <code>standard</code></li>
</ul>
<h3 id="eventstreams_location">eventstreams_location<a class="headerlink" href="#eventstreams_location" title="Permanent link">¤</a></h3>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>EVENTSTREAMS_LOCATION</code></li>
<li>Default Value: <code>us-east</code> or value defined by <code>IBMCLOUD_REGION</code></li>
</ul>
<h3 id="eventstreams_retention">eventstreams_retention<a class="headerlink" href="#eventstreams_retention" title="Permanent link">¤</a></h3>
<p>Event Streams topic retention period (in miliseconds).</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>EVENTSTREAMS_RETENTION</code></li>
<li>Default Value: <code>1209600000</code></li>
</ul>
<h3 id="eventstreams_create_manage_jms_topic">eventstreams_create_manage_jms_topic<a class="headerlink" href="#eventstreams_create_manage_jms_topic" title="Permanent link">¤</a></h3>
<p>Defines whether to create specific Manage application JMS topics by default.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>EVENTSTREAMS_CREATE_MANAGE_JMS_TOPICS</code></li>
<li>Default Value: <code>True</code></li>
</ul>
<h3 id="mas_instance_id_1">mas_instance_id<a class="headerlink" href="#mas_instance_id_1" title="Permanent link">¤</a></h3>
<p>The instance ID of Maximo Application Suite that the KafkaCfg configuration will target.  If this or <code>mas_config_dir</code> are not set then the role will not generate a KafkaCfg template.</p>
<ul>
<li>Environment Variable: <code>MAS_INSTANCE_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="mas_config_dir_1">mas_config_dir<a class="headerlink" href="#mas_config_dir_1" title="Permanent link">¤</a></h3>
<p>Local directory to save the generated KafkaCfg resource definition.  This can be used to manually configure a MAS instance to connect to the Kafka cluster, or used as an input to the <a href="../suite_config/">suite_config</a> role. If this or <code>mas_instance_id</code> are not set then the role will not generate a KafkaCfg template.</p>
<ul>
<li>Environment Variable: <code>MAS_CONFIG_DIR</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="custom_labels_1">custom_labels<a class="headerlink" href="#custom_labels_1" title="Permanent link">¤</a></h3>
<p>List of comma separated key=value pairs for setting custom labels on instance specific resources.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CUSTOM_LABELS</code></li>
<li>Default Value: None</li>
</ul>
<h2 id="example-playbook">Example Playbook<a class="headerlink" href="#example-playbook" title="Permanent link">¤</a></h2>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    # Set storage class suitable for use on IBM Cloud ROKS
    kafka_storage_class: ibmc-block-gold

    # Generate a KafkaCfg template
    mas_instance_id: masinst1
    mas_config_dir: ~/masconfig
  roles:
    - ibm.mas_devops.kafka
</code></pre>
<h2 id="aws-msk-role-variables">AWS MSK Role Variables<a class="headerlink" href="#aws-msk-role-variables" title="Permanent link">¤</a></h2>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">¤</a></h2>
<p>To run this role successfully you must have already installed the <a href="https://docs.aws.amazon.com/cli/latest/userguide/getting-started-install.html">AWS CLI</a>.
Also, you need to have AWS user credentials configured via <code>aws configure</code> command or simply export <code>AWS_ACCESS_KEY_ID</code> and <code>AWS_SECRET_ACCESS_KEY</code> environment variables with your corresponding AWS username credentials prior running this role.</p>
<h3 id="kafka_version_1">kafka_version<a class="headerlink" href="#kafka_version_1" title="Permanent link">¤</a></h3>
<p>The version of Kafka to deploy for AWS MSK.</p>
<ul>
<li>Environment Variable: <code>KAFKA_VERSION</code></li>
<li>Default Value: <code>3.3.1</code></li>
</ul>
<h3 id="kafka_cluster_name_1">kafka_cluster_name<a class="headerlink" href="#kafka_cluster_name_1" title="Permanent link">¤</a></h3>
<p>The name of the Kafka cluster that will be created</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>KAFKA_CLUSTER_NAME</code></li>
<li>Default Value: <code>maskafka</code></li>
</ul>
<h3 id="aws_region">aws_region<a class="headerlink" href="#aws_region" title="Permanent link">¤</a></h3>
<ul>
<li>Required</li>
<li>Environment Variable: <code>AWS_REGION</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="vpc_id">vpc_id<a class="headerlink" href="#vpc_id" title="Permanent link">¤</a></h3>
<p>The AWS Virtual Private Cloud identifier (VPC ID) where the MSK instance will be hosted.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>VPC_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_msk_cidr_az1">aws_msk_cidr_az1<a class="headerlink" href="#aws_msk_cidr_az1" title="Permanent link">¤</a></h3>
<p>The CIDR address for the first Availability Zone subnet. This information is found in the subnet details under your VPC.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>AWS_MSK_CIDR_AZ1</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_msk_cidr_az2">aws_msk_cidr_az2<a class="headerlink" href="#aws_msk_cidr_az2" title="Permanent link">¤</a></h3>
<p>The CIDR address for the second Availability Zone subnet. This information is found in the subnet details under your VPC.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>AWS_MSK_CIDR_AZ2</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_msk_cidr_az3">aws_msk_cidr_az3<a class="headerlink" href="#aws_msk_cidr_az3" title="Permanent link">¤</a></h3>
<p>The CIDR address for the third Availability Zone subnet. This information is found in the subnet details under your VPC.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>AWS_MSK_CIDR_AZ3</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_msk_ingress_cidr">aws_msk_ingress_cidr<a class="headerlink" href="#aws_msk_ingress_cidr" title="Permanent link">¤</a></h3>
<p>The IPv4 CIDR address for ingress connection. This information is found in the subnet details under your VPC.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>AWS_MSK_INGRESS_CIDR</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_msk_egress_cidr">aws_msk_egress_cidr<a class="headerlink" href="#aws_msk_egress_cidr" title="Permanent link">¤</a></h3>
<p>The IPv4 CIDR address for egress connection. This information is found in the subnet details under your VPC.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>AWS_MSK_EGRESS_CIDR</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_kafka_user_name">aws_kafka_user_name<a class="headerlink" href="#aws_kafka_user_name" title="Permanent link">¤</a></h3>
<p>The name of the user to setup in the cluster for MAS.</p>
<ul>
<li>Required</li>
<li>Environment Variable: <code>AWS_KAFKA_USER_NAME</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_kafka_user_password">aws_kafka_user_password<a class="headerlink" href="#aws_kafka_user_password" title="Permanent link">¤</a></h3>
<p>The password of the user to setup in the cluster for MAS.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>AWS_KAFKA_USER_PASSWORD</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_msk_instance_type">aws_msk_instance_type<a class="headerlink" href="#aws_msk_instance_type" title="Permanent link">¤</a></h3>
<p>The type/flavor of your MSK instance.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>AWS_MSK_INSTANCE_TYPE</code></li>
<li>Default Value: <code>kafka.m5.large</code></li>
</ul>
<h3 id="aws_msk_volume_size">aws_msk_volume_size<a class="headerlink" href="#aws_msk_volume_size" title="Permanent link">¤</a></h3>
<p>The storage/volume size of your MSK instance.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>AWS_MSK_VOLUME_SIZE</code></li>
<li>Default Value: <code>100</code></li>
</ul>
<h3 id="aws_msk_instance_number">aws_msk_instance_number<a class="headerlink" href="#aws_msk_instance_number" title="Permanent link">¤</a></h3>
<p>The number of broker/instances of your MSK instance.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>AWS_MSK_INSTANCE_NUMBER</code></li>
<li>Default Value: <code>3</code></li>
</ul>
<h3 id="mas_instance_id_2">mas_instance_id<a class="headerlink" href="#mas_instance_id_2" title="Permanent link">¤</a></h3>
<p>The instance ID of Maximo Application Suite that the KafkaCfg configuration will target.  If this or <code>mas_config_dir</code> are not set then the role will not generate a KafkaCfg template.</p>
<ul>
<li>Environment Variable: <code>MAS_INSTANCE_ID</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="mas_config_dir_2">mas_config_dir<a class="headerlink" href="#mas_config_dir_2" title="Permanent link">¤</a></h3>
<p>Local directory to save the generated KafkaCfg resource definition.  This can be used to manually configure a MAS instance to connect to the Kafka cluster, or used as an input to the <a href="../suite_config/">suite_config</a> role. If this or <code>mas_instance_id</code> are not set then the role will not generate a KafkaCfg template.</p>
<ul>
<li>Environment Variable: <code>MAS_CONFIG_DIR</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="custom_labels_2">custom_labels<a class="headerlink" href="#custom_labels_2" title="Permanent link">¤</a></h3>
<p>List of comma separated key=value pairs for setting custom labels on instance specific resources.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>CUSTOM_LABELS</code></li>
<li>Default Value: None</li>
</ul>
<h3 id="aws_msk_secret">aws_msk_secret<a class="headerlink" href="#aws_msk_secret" title="Permanent link">¤</a></h3>
<p>AWS MSK Secret name. The secret name must begin with the prefix AmazonMSK_. If this is not set, then default secret name will be AmazonMSK_SECRET_{{kafka_cluster_name}}</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>AWS_MSK_SECRET</code></li>
<li>Default Value: <code>AmazonMSK_SECRET_{{kafka_cluster_name}}'</code></li>
</ul>
<h2 id="example-playbook-to-install-aws-msk">Example Playbook to install AWS MSK<a class="headerlink" href="#example-playbook-to-install-aws-msk" title="Permanent link">¤</a></h2>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    aws_region: ca-central-1
    aws_access_key_id: *****
    aws_secret_access_key: *****
    kafka_version: 3.3.1
    kafka_provider: aws
    kafka_action: install
    kafka_cluster_name: msk-abcd0zyxw
    kafka_namespace: msk-abcd0zyxw
    vpc_id: vpc-07088da510b3c35c5
    aws_kafka_user_name: mskuser-abcd0zyxw
    aws_msk_instance_type: kafka.t3.small
    aws_msk_volume_size: 100
    aws_msk_instance_number: 3
    aws_msk_cidr_az1: &quot;10.0.128.0/20&quot;
    aws_msk_cidr_az2: &quot;10.0.144.0/20&quot;
    aws_msk_cidr_az3: &quot;10.0.160.0/20&quot;
    aws_msk_ingress_cidr: &quot;10.0.0.0/16&quot;
    aws_msk_egress_cidr: &quot;10.0.0.0/16&quot;
    # Generate a KafkaCfg template
    mas_config_dir: /var/tmp/masconfigdir
    mas_instance_id: abcd0zyxw
  roles:
    - ibm.mas_devops.kafka
</code></pre>
<h2 id="example-playbook-to-uninstall-aws-msk">Example Playbook to uninstall AWS MSK<a class="headerlink" href="#example-playbook-to-uninstall-aws-msk" title="Permanent link">¤</a></h2>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    aws_region: ca-central-1
    aws_access_key_id: *****
    aws_secret_access_key: *****
    vpc_id: vpc-07088da510b3c35c5
    kafka_provider: aws
    kafka_action: uninstall
    kafka_cluster_name: msk-abcd0zyxw
    aws_msk_cidr_az1: &quot;10.0.128.0/20&quot;
    aws_msk_cidr_az2: &quot;10.0.144.0/20&quot;
    aws_msk_cidr_az3: &quot;10.0.160.0/20&quot;
  roles:
    - ibm.mas_devops.kafka
</code></pre>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">¤</a></h2>
<p>EPL-2.0</p>
      
    </div>
    <!-- <div id="footer" class="rst-content">
      Built with mkdocs v1.6.1 (2025-08-05 16:29:45.349659+00:00)
    </div> -->
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": false, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body>
</html>