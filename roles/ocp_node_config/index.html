<!DOCTYPE html><html lang="en"><head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ocp_node_config - MAS DevOps Ansible Collection</title>

    <!-- Pure CSS (https://pure-css.github.io/) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/purecss@3.0.0/build/pure-min.css" integrity="sha384-X38yfunGUhNzHpBaEBsWLO+A0HDYOQi8ufWDkZ0k9e0eXz/tH3II7uKZ9msv++Ls" crossorigin="anonymous">
    <link rel="stylesheet" href="../../css/theme.css">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E=" crossorigin="anonymous"></script>
    <script src="../../js/theme.js"></script>

    <!-- Carbon theme zones (white, g10, g90, g100) -->
    <link rel="stylesheet" href="https://1.www.s81c.com/common/carbon/web-components/tag/latest/themes.css">

    <!-- The Carbon web-components/framework -->
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/ui-shell.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/accordion.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/breadcrumb.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/select.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/tabs.min.js"></script>
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/version/v2.15.0/search.min.js"></script>

    <!-- HighlightJS code formatting support -->
    <link rel="stylesheet" id="hljs-light" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css">
    <link rel="stylesheet" id="hljs-dark" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/languages/yaml.min.js"></script>
    <script>hljs.highlightAll();</script>

    <!-- Required by MkDocs search -->
    <script>var base_url = "../..";</script>

    <!-- User defined extras -->
    
    

    

    
    <script src="../../search/main.js"></script>
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: black; }
        </style></head>

  <body class="md-grid" data-theme-default="g90">
    <!-- Header -->
    <cds-header aria-label="MAS DevOps Ansible Collection" class="md-header">
      <cds-header-menu-button button-label-active="Close menu" button-label-inactive="Open menu"></cds-header-menu-button>
      <cds-header-name href="../.." prefix="IBM">MAS DevOps Ansible Collection</cds-header-name>
      <cds-header-nav menu-bar-label="IBM MAS DevOps Ansible Collection">
          <cds-header-nav-item is-active target="" href="">Ansible</cds-header-nav-item>
          <cds-header-nav-item target="" href="https://ibm-mas.github.io/cli/">CLI</cds-header-nav-item>
      </cds-header-nav>

      <div class="cds--header__global">
<div class="md-theme-toggle" data-theme-default="g90">
  <button class="md-theme-toggle__button" aria-label="Toggle theme" title="Toggle theme">
    <svg class="md-theme-toggle__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"></path>
    </svg>
  </button>
  <div class="md-theme-toggle__menu" hidden>
    <button class="md-theme-toggle__option" data-theme="white">
      <span class="md-theme-toggle__label">Light</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--white"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g10">
      <span class="md-theme-toggle__label">Light Gray</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g10"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g90">
      <span class="md-theme-toggle__label">Dark Gray</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g90"></span>
    </button>
    <button class="md-theme-toggle__option" data-theme="g100">
      <span class="md-theme-toggle__label">Dark</span>
      <span class="md-theme-toggle__preview md-theme-toggle__preview--g100"></span>
    </button>
  </div>
</div>
        <cds-search id="header-search" label-text="Search" cds-search-input="search-event" expandable></cds-search>
      </div>
      <script>
        var el = document.getElementById("header-search");
        el.addEventListener("cds-search-input", function (ev) {
          console.info(ev.detail.value)
          document.getElementById("header-search-value").setAttribute("value", ev.detail.value);
        });
        el.addEventListener('keydown', function (ev) {
          if (ev.key === 'Enter') {
            location.href="../../search.html?q=" + document.querySelector("#header-search").shadowRoot.querySelector("#input").value;
          }
        });
      </script>

      
    </cds-header>

    <!-- Main container with three-column layout -->
    <div class="md-container">
      <!-- Left sidebar - Navigation -->
      <aside class="md-sidebar md-sidebar--primary" data-md-component="sidebar">
        <div class="md-sidebar__scrollwrap">
          <div class="md-sidebar__inner">
            <cds-side-nav aria-label="Side navigation">
              <cds-side-nav-items>
                
                  
  <cds-side-nav-menu title="General Information">
    
      
  <cds-side-nav-menu-item href="../..">
    Home
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../execution-environment/">
    Ansible Automation Platform
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Playbooks">
    
      
  <cds-side-nav-menu-item href="../../playbooks/ocp/">
    OCP
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/cp4d/">
    Install Cloud Pak For Data
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/aiservice/">
    Install AI Service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-core/">
    Install Core
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-iot/">
    Add IoT
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-manage/">
    Add Manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-monitor/">
    Add Monitor
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-optimizer/">
    Add Optimizer
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-predict/">
    Add Predict
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-visualinspection/">
    Add Visual Inspection
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-facilities/">
    Add Real Estate and Facilities
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-update/">
    Update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/mas-upgrade/">
    Upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../../playbooks/backup-restore/">
    Backup &amp; Restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: OCP Mgmt" active expanded>
    
      
  <cds-side-nav-menu-item href="../ocp_cluster_monitoring/">
    ocp_cluster_monitoring
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_config/">
    ocp_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_deprovision/">
    ocp_deprovision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_efs/">
    ocp_efs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_github_oauth/">
    ocp_github_oauth
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_login/">
    ocp_login
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="./" active expanded>
    ocp_node_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_provision/">
    ocp_provision
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_roks_upgrade_registry_storage/">
    ocp_roks_upgrade_registry_storage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_upgrade/">
    ocp_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_verify/">
    ocp_verify
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Dependency Mgmt">
    
      
  <cds-side-nav-menu-item href="../aws_bucket_access_point/">
    aws_bucket_access_point
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_documentdb_user/">
    aws_documentdb_user
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_policy/">
    aws_policy
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_route53/">
    aws_route53
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_user_creation/">
    aws_user_creation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../aws_vpc/">
    aws_vpc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cert_manager/">
    cert_manager
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cis/">
    cis
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../configure_manage_eventstreams/">
    configure_manage_eventstreams
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos/">
    cos
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cos_bucket/">
    cos_bucket
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_admin_pwd_update/">
    cp4d_admin_pwd_update
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d/">
    cp4d
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../cp4d_service/">
    cp4d_service
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../db2/">
    db2
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../dro/">
    dro
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../eck/">
    eck
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../grafana/">
    grafana
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ibm_catalogs/">
    ibm_catalogs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../kafka/">
    kafka
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../longhorn/">
    longhorn
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../nvidia_gpu/">
    nvidia_gpu
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mongodb/">
    mongodb
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocs/">
    ocs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../sls/">
    sls
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../turbonomic/">
    turbonomic
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Image Mirroring">
    
      
  <cds-side-nav-menu-item href="../mirror_case_prepare/">
    mirror_case_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_extras_prepare/">
    mirror_extras_prepare
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_images/">
    mirror_images
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../mirror_ocp/">
    mirror_ocp
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_idms/">
    ocp_idms
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../ocp_simulate_disconnected_network/">
    ocp_simulate_disconnected_network
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../registry/">
    registry
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Suite Mgmt">
    
      
  <cds-side-nav-menu-item href="../suite_app_config/">
    suite_app_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_install/">
    suite_app_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_uninstall/">
    suite_app_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_upgrade/">
    suite_app_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_rollback/">
    suite_app_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_app_backup_restore/">
    suite_app_backup_restore
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_certs/">
    suite_certs
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_config/">
    suite_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_db2_setup_for_manage/">
    suite_db2_setup_for_manage
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_dns/">
    suite_dns
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_install/">
    suite_install
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_attachments_config/">
    suite_manage_attachments_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_birt_report_config/">
    suite_manage_birt_report_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_bim_config/">
    suite_manage_bim_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_customer_files_config/">
    suite_manage_customer_files_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_imagestitching_config/">
    suite_manage_imagestitching_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_import_certs_config/">
    suite_manage_import_certs_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_load_dbc_scripts/">
    suite_manage_load_dbc_scripts
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_logging_config/">
    suite_manage_logging_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_manage_pvc_config/">
    suite_manage_pvc_config
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_uninstall/">
    suite_uninstall
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_upgrade/">
    suite_upgrade
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_rollback/">
    suite_rollback
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_verify/">
    suite_verify
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../suite_backup_restore/">
    suite_backup_restore
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
                  
  <cds-side-nav-menu title="Roles: Utilities">
    
      
  <cds-side-nav-menu-item href="../ansible_version_check/">
    ansible_version_check
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../entitlement_key_rotation/">
    entitlement_key_rotation
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_jdbc/">
    gencfg_jdbc
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_watsonstudio/">
    gencfg_watsonstudio
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_workspace/">
    gencfg_workspace
  </cds-side-nav-menu-item>

    
      
  <cds-side-nav-menu-item href="../gencfg_mongo/">
    gencfg_mongo
  </cds-side-nav-menu-item>

    
  </cds-side-nav-menu>

                
              </cds-side-nav-items>
            </cds-side-nav>
          </div>
        </div>
      </aside>

      <!-- Main content area -->
      <div class="md-content" data-md-component="content">
        <article class="md-content__inner">
          <!-- Breadcrumbs -->
          <div class="md-breadcrumbs"><cds-breadcrumb no-trailing-slash>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="../..">Home</cds-breadcrumb-link>
  </cds-breadcrumb-item>
      <cds-breadcrumb-item>Roles: OCP Mgmt</cds-breadcrumb-item>
  <cds-breadcrumb-item>
    <cds-breadcrumb-link href="#ocp_node_config">ocp_node_config</cds-breadcrumb-link>
  </cds-breadcrumb-item>

  <cds-breadcrumb-item aria-current="page">
    <cds-select id="breadcrumbs-toc" inline placeholder="..." oninput="changeAnchor(this.value)">
    
    
      <cds-select-item value="#role-variables-node-selection">Role Variables - Node Selection</cds-select-item>
    
      <cds-select-item value="#role-variables-node-labels">Role Variables - Node Labels</cds-select-item>
    
      <cds-select-item value="#role-variables-node-taints">Role Variables - Node Taints</cds-select-item>
    
      <cds-select-item value="#example-playbook">Example Playbook</cds-select-item>
    
      <cds-select-item value="#license">License</cds-select-item>
    
    </cds-select>
  </cds-breadcrumb-item>
</cds-breadcrumb>
          </div>

          <!-- Page content -->
          <div class="rst-content">
            
            <h1 id="ocp_node_config">ocp_node_config<a class="headerlink" href="#ocp_node_config" title="Permanent link">¤</a></h1>
<p>Configure individual OpenShift nodes with custom labels and taints to control workload placement. This role enables creation of dedicated nodes for specific workloads (e.g., Db2, MongoDB, compute-intensive applications) by applying Kubernetes node selectors and taints.</p>
<p>Use labels to direct workloads to specific nodes and taints to prevent unwanted workloads from running on dedicated nodes. This is essential for performance isolation, resource management, and meeting specific hardware requirements.</p>
<p><strong>Verification</strong>: Use the following command to verify labels and taints:</p>
<pre><code class="language-bash">oc get pods --all-namespaces -o wide --field-selector spec.nodeName=&lt;node-name&gt;
</code></pre>
<h2 id="role-variables-node-selection">Role Variables - Node Selection<a class="headerlink" href="#role-variables-node-selection" title="Permanent link">¤</a></h2>
<p><strong>Important</strong>: Specify either <code>ocp_node_name</code> OR <code>ocp_node_index</code> to identify the target node. If both are specified, <code>ocp_node_index</code> takes priority. If neither is specified, the role will fail.</p>
<h3 id="ocp_node_name">ocp_node_name<a class="headerlink" href="#ocp_node_name" title="Permanent link">¤</a></h3>
<p>Node name to configure with labels and/or taints.</p>
<ul>
<li>Optional (but one of <code>ocp_node_name</code> or <code>ocp_node_index</code> is required)</li>
<li>Environment Variable: <code>OCP_NODE_NAME</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Identifies a specific node by its name for label and taint configuration.</p>
<p><strong>When to use</strong>: Use when you know the exact node name. Preferred method for production environments where node names are predictable.</p>
<p><strong>Valid values</strong>: Valid OpenShift node name (e.g., <code>worker-0.example.com</code>, <code>10.172.168.89</code>).</p>
<p><strong>Impact</strong>: The specified node will be configured with the provided labels and taints. Incorrect node name will cause the role to fail.</p>
<p><strong>Related variables</strong>: <code>ocp_node_index</code> (alternative selection method)</p>
<p><strong>Notes</strong>:
- Get node names with: <code>oc get nodes</code>
- Node names may be hostnames, IP addresses, or cloud provider identifiers
- If both <code>ocp_node_name</code> and <code>ocp_node_index</code> are set, index takes priority</p>
<h3 id="ocp_node_index">ocp_node_index<a class="headerlink" href="#ocp_node_index" title="Permanent link">¤</a></h3>
<p>Zero-based index of the node in the cluster's node list.</p>
<ul>
<li>Optional (but one of <code>ocp_node_name</code> or <code>ocp_node_index</code> is required)</li>
<li>Environment Variable: <code>OCP_NODE_INDEX</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Identifies a node by its position in the sorted list of cluster nodes.</p>
<p><strong>When to use</strong>: Useful in automation scenarios where node names are not known in advance, or when configuring nodes sequentially.</p>
<p><strong>Valid values</strong>: Non-negative integer starting from 0 (e.g., <code>0</code> for first node, <code>1</code> for second node).</p>
<p><strong>Impact</strong>: The node at the specified index position will be configured. Index out of range will cause the role to fail.</p>
<p><strong>Related variables</strong>: <code>ocp_node_name</code> (alternative selection method)</p>
<p><strong>Notes</strong>:
- Index 0 refers to the first node in alphabetically sorted list
- Node order may change if nodes are added/removed
- Takes priority over <code>ocp_node_name</code> if both are set
- Less reliable than node name for production use</p>
<h2 id="role-variables-node-labels">Role Variables - Node Labels<a class="headerlink" href="#role-variables-node-labels" title="Permanent link">¤</a></h2>
<h3 id="ocp_node_label_keys">ocp_node_label_keys<a class="headerlink" href="#ocp_node_label_keys" title="Permanent link">¤</a></h3>
<p>Comma-separated list of label keys to add to the selected node.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>OCP_NODE_LABEL_KEYS</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Defines the label keys that will be applied to the node. Labels are used by pod node selectors to direct workloads to specific nodes.</p>
<p><strong>When to use</strong>: Use to categorize nodes by workload type, hardware capabilities, or any custom classification scheme.</p>
<p><strong>Valid values</strong>: Comma-separated list of valid Kubernetes label keys (e.g., <code>workload</code>, <code>storage-type,gpu-enabled</code>). Label keys must:
- Start and end with alphanumeric characters
- Contain only alphanumeric, dash, underscore, or dot characters
- Be 63 characters or less</p>
<p><strong>Impact</strong>: Labels enable pod scheduling based on node selectors. Pods with matching node selectors will prefer or require these nodes.</p>
<p><strong>Related variables</strong>: <code>ocp_node_label_values</code> (must have same number of values as keys)</p>
<p><strong>Notes</strong>:
- Number of keys must match number of values
- Common label keys: <code>workload</code>, <code>node-role</code>, <code>storage-type</code>, <code>hardware-type</code>
- Labels are additive; existing labels are not removed
- Use with pod <code>nodeSelector</code> or <code>nodeAffinity</code> for workload placement</p>
<h3 id="ocp_node_label_values">ocp_node_label_values<a class="headerlink" href="#ocp_node_label_values" title="Permanent link">¤</a></h3>
<p>Comma-separated list of label values corresponding to the label keys.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>OCP_NODE_LABEL_VALUES</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Provides the values for each label key specified in <code>ocp_node_label_keys</code>.</p>
<p><strong>When to use</strong>: Required when <code>ocp_node_label_keys</code> is set. Must provide exactly one value for each key.</p>
<p><strong>Valid values</strong>: Comma-separated list of valid Kubernetes label values (e.g., <code>db2</code>, <code>ssd,true</code>). Label values must:
- Start and end with alphanumeric characters
- Contain only alphanumeric, dash, underscore, or dot characters
- Be 63 characters or less</p>
<p><strong>Impact</strong>: Combined with keys, creates complete labels (key=value pairs) on the node.</p>
<p><strong>Related variables</strong>: <code>ocp_node_label_keys</code> (must have same number of keys as values)</p>
<p><strong>Notes</strong>:
- Number of values must exactly match number of keys
- Order matters: first value pairs with first key, etc.
- Common label values: <code>db2</code>, <code>mongodb</code>, <code>compute</code>, <code>storage</code>
- Example: keys=<code>workload,storage</code> values=<code>db2,ssd</code> creates labels <code>workload=db2</code> and <code>storage=ssd</code></p>
<h2 id="role-variables-node-taints">Role Variables - Node Taints<a class="headerlink" href="#role-variables-node-taints" title="Permanent link">¤</a></h2>
<h3 id="ocp_node_taint_keys">ocp_node_taint_keys<a class="headerlink" href="#ocp_node_taint_keys" title="Permanent link">¤</a></h3>
<p>Comma-separated list of taint keys to add to the selected node.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>OCP_NODE_TAINT_KEYS</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Defines the taint keys that will prevent pods without matching tolerations from being scheduled on the node.</p>
<p><strong>When to use</strong>: Use to dedicate nodes to specific workloads by preventing other pods from running on them.</p>
<p><strong>Valid values</strong>: Comma-separated list of valid Kubernetes taint keys (e.g., <code>dedicatedDb2Node</code>, <code>gpu-workload,high-memory</code>).</p>
<p><strong>Impact</strong>: Pods without matching tolerations will not be scheduled on this node. Existing pods may be evicted depending on taint effect.</p>
<p><strong>Related variables</strong>: <code>ocp_node_taint_values</code>, <code>ocp_node_taint_effects</code> (must have same number of entries)</p>
<p><strong>Notes</strong>:
- Number of keys must match number of values and effects
- Taints are more restrictive than labels
- Common taint keys: <code>dedicatedDb2Node</code>, <code>dedicatedMongoNode</code>, <code>gpu-required</code>
- Pods must have matching tolerations to run on tainted nodes</p>
<h3 id="ocp_node_taint_values">ocp_node_taint_values<a class="headerlink" href="#ocp_node_taint_values" title="Permanent link">¤</a></h3>
<p>Comma-separated list of taint values corresponding to the taint keys.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>OCP_NODE_TAINT_VALUES</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Provides the values for each taint key, typically identifying which workload or instance the node is dedicated to.</p>
<p><strong>When to use</strong>: Required when <code>ocp_node_taint_keys</code> is set. Must provide exactly one value for each key.</p>
<p><strong>Valid values</strong>: Comma-separated list of taint values (e.g., <code>masinst1</code>, <code>prod-db,gpu-cluster</code>).</p>
<p><strong>Impact</strong>: Combined with keys and effects, creates complete taints that control pod scheduling.</p>
<p><strong>Related variables</strong>: <code>ocp_node_taint_keys</code>, <code>ocp_node_taint_effects</code> (must have same number of entries)</p>
<p><strong>Notes</strong>:
- Number of values must exactly match number of keys and effects
- Values often identify specific instances or workload identifiers
- Example: key=<code>dedicatedDb2Node</code> value=<code>masinst1</code> effect=<code>NoExecute</code> dedicates node to masinst1's Db2</p>
<h3 id="ocp_node_taint_effects">ocp_node_taint_effects<a class="headerlink" href="#ocp_node_taint_effects" title="Permanent link">¤</a></h3>
<p>Comma-separated list of taint effects defining how the taint impacts pod scheduling.</p>
<ul>
<li>Optional</li>
<li>Environment Variable: <code>OCP_NODE_TAINT_EFFECTS</code></li>
<li>Default: None</li>
</ul>
<p><strong>Purpose</strong>: Specifies the enforcement level for each taint, controlling both new pod scheduling and existing pod eviction.</p>
<p><strong>When to use</strong>: Required when <code>ocp_node_taint_keys</code> is set. Choose effect based on desired behavior.</p>
<p><strong>Valid values</strong>: Comma-separated list of taint effects:
- <code>NoSchedule</code> - New pods without tolerations will not be scheduled; existing pods remain
- <code>PreferNoSchedule</code> - Scheduler tries to avoid placing pods without tolerations; not guaranteed
- <code>NoExecute</code> - New pods without tolerations will not be scheduled; existing pods without tolerations are evicted</p>
<p><strong>Impact</strong>:
- <code>NoSchedule</code>: Prevents new workloads but preserves existing ones
- <code>PreferNoSchedule</code>: Soft constraint, may be overridden by scheduler
- <code>NoExecute</code>: Strongest enforcement, evicts non-tolerating pods immediately</p>
<p><strong>Related variables</strong>: <code>ocp_node_taint_keys</code>, <code>ocp_node_taint_values</code> (must have same number of entries)</p>
<p><strong>Notes</strong>:
- Number of effects must exactly match number of keys and values
- <code>NoExecute</code> is most disruptive but ensures dedicated nodes
- <code>NoSchedule</code> is common for gradual migration to dedicated nodes
- <code>PreferNoSchedule</code> is least restrictive, useful for soft preferences
- Example: Use <code>NoExecute</code> for Db2 dedicated nodes to ensure no other workloads run</p>
<h2 id="example-playbook">Example Playbook<a class="headerlink" href="#example-playbook" title="Permanent link">¤</a></h2>
<pre><code class="language-yaml">- hosts: localhost
  any_errors_fatal: true
  vars:
    # Turn this worker node into a dedicated Db2 worker node
    ocp_node_name: "10.172.168.89"

    # Add the label that will be applied to all dedicated Db2 nodes
    # this will be used to direct Db2 workloads to these nodes
    ocp_node_label_keys: workload
    ocp_node_label_values: db2

    # Set a taint preventing anything other than Db2 workloads for masinst1 running
    # on this node specific Db2 node
    ocp_node_taint_keys: dedicatedDb2Node
    ocp_node_taint_values: masinst1
    ocp_node_taint_effects: NoExecute

  roles:
    - ibm.mas_devops.ocp_node_config
</code></pre>
<h2 id="license">License<a class="headerlink" href="#license" title="Permanent link">¤</a></h2>
<p>EPL-2.0</p>
            
          </div>

          <!-- Navigation footer (prev/next) -->
<nav class="md-footer-nav" aria-label="Footer navigation">
  <div class="md-footer-nav__inner">
    <a href="../ocp_login/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
      <div class="md-footer-nav__direction">
        <svg class="md-footer-nav__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"></path>
        </svg>
        <span>Previous</span>
      </div>
      <div class="md-footer-nav__title">
        <span class="md-footer-nav__title-text">ocp_login</span>
      </div>
    </a>
    <a href="../ocp_provision/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
      <div class="md-footer-nav__direction">
        <span>Next</span>
        <svg class="md-footer-nav__icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"></path>
        </svg>
      </div>
      <div class="md-footer-nav__title">
        <span class="md-footer-nav__title-text">ocp_provision</span>
      </div>
    </a>
  </div>
</nav>
        </article>
      </div>

      <!-- Right sidebar - Table of Contents -->
      <aside class="md-sidebar md-sidebar--secondary" data-md-component="toc">
<nav class="md-sidebar md-sidebar--secondary" aria-label="Table of contents">
  <div class="md-sidebar__scrollwrap">
    <div class="md-sidebar__inner">
      <div class="md-toc">
        <div class="md-toc__title">On this page</div>
        <ul class="md-toc__list">
              <li class="md-toc__item">
                <a href="#role-variables-node-selection" class="md-toc__link" data-md-level="1">
                  Role Variables - Node Selection
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#ocp_node_name" class="md-toc__link" data-md-level="2">
                          ocp_node_name
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#ocp_node_index" class="md-toc__link" data-md-level="2">
                          ocp_node_index
                        </a>
                      </li>
                  </ul>
              </li>
              <li class="md-toc__item">
                <a href="#role-variables-node-labels" class="md-toc__link" data-md-level="1">
                  Role Variables - Node Labels
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#ocp_node_label_keys" class="md-toc__link" data-md-level="2">
                          ocp_node_label_keys
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#ocp_node_label_values" class="md-toc__link" data-md-level="2">
                          ocp_node_label_values
                        </a>
                      </li>
                  </ul>
              </li>
              <li class="md-toc__item">
                <a href="#role-variables-node-taints" class="md-toc__link" data-md-level="1">
                  Role Variables - Node Taints
                </a>
                  <ul class="md-toc__list">
                      <li class="md-toc__item">
                        <a href="#ocp_node_taint_keys" class="md-toc__link" data-md-level="2">
                          ocp_node_taint_keys
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#ocp_node_taint_values" class="md-toc__link" data-md-level="2">
                          ocp_node_taint_values
                        </a>
                      </li>
                      <li class="md-toc__item">
                        <a href="#ocp_node_taint_effects" class="md-toc__link" data-md-level="2">
                          ocp_node_taint_effects
                        </a>
                      </li>
                  </ul>
              </li>
              <li class="md-toc__item">
                <a href="#example-playbook" class="md-toc__link" data-md-level="1">
                  Example Playbook
                </a>
              </li>
              <li class="md-toc__item">
                <a href="#license" class="md-toc__link" data-md-level="1">
                  License
                </a>
              </li>
        </ul>
      </div>
    </div>
  </div>
</nav>
      </aside>
    </div>

    <!-- Footer - Full width outside container -->
    <footer class="md-footer">
      Built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/durera/mkdocs-carbon">Carbon theme</a>
    </footer>
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": false, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
</script></body></html>